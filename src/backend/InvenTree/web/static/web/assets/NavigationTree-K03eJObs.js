import{es as E,bO as A,r as x,j as a,G as p,bR as T,bK as z,cy as I,et as N,D as L,cE as R,S as U,bP as F,bT as G,bU as K,i as m,d as M,eu as O,ah as _}from"./vendor-c9tu_e1b.js";import{h as $,r as q,n as B,e as P}from"./index-C-YqHYR0.js";import{u as Q}from"./DesktopAppView-Bg1vO8uy.js";import{k as Y}from"./UseForm-21BEg7Md.js";import{a as H,S as J}from"./ThemeContext-CVPHi9Q7.js";function ee({title:b,opened:l,onClose:j,selectedId:c,modelType:d,endpoint:w}){const k=Q(),h=H(),u=E(),t=A({enabled:l,queryKey:[d,l],queryFn:async()=>k.get(P(w),{data:{ordering:"level"}}).then(e=>e.data??[])}),C=x.useCallback((e,s)=>{const i=$(d,e.value);q(s)?B(i,h,s):(j(),h(i))},[d,h]),S=x.useMemo(()=>{var i,g;const e={},s=[];if(!t||!((i=t==null?void 0:t.data)!=null&&i.length))return[];for(let n=0;n<t.data.length;n++){const r={...t.data[n],children:[],label:a.jsxs(p,{gap:"xs",children:[a.jsx(Y,{name:t.data[n].icon}),t.data[n].name]}),value:t.data[n].pk.toString(),selected:t.data[n].pk===c},v=r.pk,f=r.parent;if(f?(g=e[f])==null||g.children.push(r):s.push(r),e[v]=r,v===c){let o=e[r.parent];for(;o;)o.expanded=!0,o=e[o.parent]}}return s},[c,t.data]),D=x.useCallback(e=>a.jsxs(p,{p:3,justify:"left",wrap:"nowrap",onClick:()=>{e.hasChildren&&u.toggleExpanded(e.node.value)},children:[a.jsx(T,{w:3*e.level}),a.jsx(z,{size:"sm",variant:"transparent","aria-label":`nav-tree-toggle-${e.node.value}}`,children:e.hasChildren?e.expanded?a.jsx(I,{}):a.jsx(N,{}):null}),a.jsx(L,{onClick:s=>C(e.node,s),"aria-label":`nav-tree-item-${e.node.value}`,c:"var(--mantine-color-text)",children:e.node.label})]},e.node.value),[u]);return a.jsx(R,{opened:l,size:"md",position:"left",onClose:j,withCloseButton:!0,styles:{header:{width:"100%"},title:{width:"100%"}},title:a.jsxs(p,{justify:"left",p:"ms",gap:"md",wrap:"nowrap",children:[a.jsx(_,{}),a.jsx(J,{size:"lg",children:b})]}),children:a.jsxs(U,{gap:"xs",children:[a.jsx(F,{}),a.jsx(G,{visible:t.isFetching||t.isLoading}),t.isError?a.jsx(K,{color:"red",title:m._({id:"SlfejT"}),icon:a.jsx(M,{}),children:m._({id:"nY0zwD"})}):a.jsx(O,{data:S,tree:u,renderNode:D})]})})}export{ee as N};
//# sourceMappingURL=NavigationTree-K03eJObs.js.map
