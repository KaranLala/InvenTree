import{r as a,i as t,j as u}from"./vendor-c9tu_e1b.js";import{u as M,n as F,L as E,R as L,a as v,I}from"./InvenTreeTable-_nPJoCLK.js";import{b as N,m,A as b,U as d,e as U}from"./index-C-YqHYR0.js";import{u as V,a as y}from"./UseForm-21BEg7Md.js";import{a as P}from"./UseStockAdjustActions-PDcplZpx.js";import{R as q,S as J,P as K,h as A,j as W}from"./ColumnRenderers-6-W27ey5.js";function H({buildId:R,stockId:C,partId:o,showBuildInfo:r,showPartInfo:c,allowEdit:_,modelTarget:w,modelField:S}){const i=N(),l=M(o?"buildallocatedstock-part":"buildallocatedstock"),T=a.useMemo(()=>{const e=[{name:"tracked",label:t._({id:"ML+087"}),description:t._({id:"mVVw+/"})}];return o&&e.push(F()),e.push(E()),e},[o]),g=a.useMemo(()=>[q({accessor:"build_detail.reference",title:t._({id:"YxwWvi"}),switchable:!1,hidden:r!=!0}),{accessor:"build_detail.title",title:t._({id:"Nu4oKW"}),hidden:r!=!0},J({accessor:"build_detail.status",model:m.build,title:t._({id:"acIJ41"}),hidden:r!=!0}),{accessor:"part",hidden:!c,title:t._({id:"vgP+9p"}),sortable:!0,switchable:!1,render:e=>K({part:e.part_detail})},{accessor:"part_detail.IPN",ordering:"IPN",hidden:!c,title:t._({id:"3wXEsN"}),sortable:!0,switchable:!0},{hidden:!c,accessor:"bom_reference",title:t._({id:"N2C89m"}),sortable:!0,switchable:!0},{accessor:"serial",title:t._({id:"AXeJt4"}),sortable:!1,switchable:!0,render:e=>{var s;return(s=e==null?void 0:e.stock_item_detail)==null?void 0:s.serial}},{accessor:"batch",title:t._({id:"Vea6Aj"}),sortable:!1,switchable:!0,render:e=>{var s;return(s=e==null?void 0:e.stock_item_detail)==null?void 0:s.batch}},A({accessor:"available",title:t._({id:"I8CEek"})}),A({accessor:"quantity",title:t._({id:"Tk6w1l"}),sortable:!0,switchable:!1}),W({accessor:"location_detail",switchable:!0,sortable:!0}),{accessor:"install_into",title:t._({id:"gILim+"}),sortable:!0},{accessor:"sku",title:t._({id:"nne72x"}),render:e=>{var s;return(s=e==null?void 0:e.supplier_part_detail)==null?void 0:s.SKU},sortable:!0}],[]),[p,k]=a.useState(0),f=V({pk:p,url:b.build_item_list,title:t._({id:"Tqnsor"}),fields:{stock_item:{disabled:!0},quantity:{}},table:l}),h=y({pk:p,url:b.build_item_list,title:t._({id:"nV5okC"}),table:l}),j=a.useMemo(()=>({items:l.selectedRecords.filter(s=>!!s.stock_item_detail).map(s=>({...s.stock_item_detail,part_detail:s.part_detail,location_detail:s.location_detail})),model:m.stockitem,refresh:l.refreshTable}),[l.selectedRecords,l.refreshTable]),n=P({formProps:j,merge:!1,assign:!1,delete:!1,add:!1,count:!1,remove:!1}),x=a.useCallback(e=>[L({hidden:!i.hasChangeRole(d.build),onClick:()=>{k(e.pk),f.open()}}),v({hidden:!i.hasDeleteRole(d.build),onClick:()=>{k(e.pk),h.open()}})],[i]),D=a.useMemo(()=>[n.dropdown],[n.dropdown]);return u.jsxs(u.Fragment,{children:[f.modal,h.modal,n.modals.map(e=>e.modal),u.jsx(I,{tableState:l,url:U(b.build_item_list),columns:g,props:{params:{build:R,part:o,stock_item:C,build_detail:r??!1,part_detail:c??!1,location_detail:!0,stock_detail:!0,supplier_detail:!0},enableBulkDelete:_&&i.hasDeleteRole(d.build),enableDownload:!0,enableSelection:_&&i.hasDeleteRole(d.build),rowActions:x,tableActions:D,tableFilters:T,enableLabels:!0,enableReports:!0,printingAccessor:"stock_item",modelField:S??"stock_item",modelType:w??m.stockitem}})]})}export{H as B};
//# sourceMappingURL=BuildAllocatedStockTable-B94pFMpl.js.map
