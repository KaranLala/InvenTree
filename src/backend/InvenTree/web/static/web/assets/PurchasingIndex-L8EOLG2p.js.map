{"version":3,"file":"PurchasingIndex-L8EOLG2p.js","sources":["../../../../../../frontend/src/pages/purchasing/PurchasingIndex.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport { Stack } from '@mantine/core';\nimport {\n  IconBuildingFactory2,\n  IconBuildingStore,\n  IconBuildingWarehouse,\n  IconCalendar,\n  IconPackageExport,\n  IconShoppingCart,\n  IconTable\n} from '@tabler/icons-react';\nimport { useMemo } from 'react';\n\nimport { ModelType } from '@lib/enums/ModelType';\nimport { UserRoles } from '@lib/enums/Roles';\nimport { useLocalStorage } from '@mantine/hooks';\nimport SegmentedIconControl from '../../components/buttons/SegmentedIconControl';\nimport OrderCalendar from '../../components/calendar/OrderCalendar';\nimport PermissionDenied from '../../components/errors/PermissionDenied';\nimport { PageDetail } from '../../components/nav/PageDetail';\nimport { PanelGroup } from '../../components/panels/PanelGroup';\nimport { useUserState } from '../../states/UserState';\nimport { CompanyTable } from '../../tables/company/CompanyTable';\nimport { ManufacturerPartTable } from '../../tables/purchasing/ManufacturerPartTable';\nimport { PurchaseOrderTable } from '../../tables/purchasing/PurchaseOrderTable';\nimport { SupplierPartTable } from '../../tables/purchasing/SupplierPartTable';\n\nfunction PurchaseOrderOverview({\n  view\n}: {\n  view: string;\n}) {\n  switch (view) {\n    case 'calendar':\n      return (\n        <OrderCalendar\n          model={ModelType.purchaseorder}\n          role={UserRoles.purchase_order}\n          params={{ outstanding: true }}\n        />\n      );\n    case 'table':\n    default:\n      return <PurchaseOrderTable />;\n  }\n}\n\nexport default function PurchasingIndex() {\n  const user = useUserState();\n\n  const [purchaseOrderView, setpurchaseOrderView] = useLocalStorage<string>({\n    key: 'purchaseOrderView',\n    defaultValue: 'table'\n  });\n\n  const panels = useMemo(() => {\n    return [\n      {\n        name: 'purchaseorders',\n        label: t`Purchase Orders`,\n        icon: <IconShoppingCart />,\n        hidden: !user.hasViewRole(UserRoles.purchase_order),\n        content: <PurchaseOrderOverview view={purchaseOrderView} />,\n        controls: (\n          <SegmentedIconControl\n            value={purchaseOrderView}\n            onChange={setpurchaseOrderView}\n            data={[\n              { value: 'table', label: t`Table View`, icon: <IconTable /> },\n              {\n                value: 'calendar',\n                label: t`Calendar View`,\n                icon: <IconCalendar />\n              }\n            ]}\n          />\n        )\n      },\n      {\n        name: 'suppliers',\n        label: t`Suppliers`,\n        icon: <IconBuildingStore />,\n        content: (\n          <CompanyTable\n            path='purchasing/supplier'\n            params={{ is_supplier: true }}\n          />\n        )\n      },\n      {\n        name: 'supplier-parts',\n        label: t`Supplier Parts`,\n        icon: <IconPackageExport />,\n        content: <SupplierPartTable params={{}} />\n      },\n      {\n        name: 'manufacturer',\n        label: t`Manufacturers`,\n        icon: <IconBuildingFactory2 />,\n        content: (\n          <CompanyTable\n            path='purchasing/manufacturer'\n            params={{ is_manufacturer: true }}\n          />\n        )\n      },\n      {\n        name: 'manufacturer-parts',\n        label: t`Manufacturer Parts`,\n        icon: <IconBuildingWarehouse />,\n        content: <ManufacturerPartTable params={{}} />\n      }\n    ];\n  }, [user, purchaseOrderView]);\n\n  if (!user.isLoggedIn() || !user.hasViewRole(UserRoles.purchase_order)) {\n    return <PermissionDenied />;\n  }\n\n  return (\n    <Stack>\n      <PageDetail title={t`Purchasing`} />\n      <PanelGroup\n        pageKey='purchasing-index'\n        panels={panels}\n        model={'purchasing'}\n        id={null}\n      />\n    </Stack>\n  );\n}\n"],"names":["PurchaseOrderOverview","view","jsx","OrderCalendar","ModelType","purchaseorder","UserRoles","purchase_order","outstanding","PurchaseOrderTable","PurchasingIndex","user","useUserState","purchaseOrderView","setpurchaseOrderView","useLocalStorage","key","defaultValue","panels","useMemo","name","label","_i18n","_","id","icon","IconShoppingCart","hidden","hasViewRole","content","controls","SegmentedIconControl","value","IconTable","IconCalendar","IconBuildingStore","CompanyTable","is_supplier","IconPackageExport","SupplierPartTable","IconBuildingFactory2","is_manufacturer","IconBuildingWarehouse","ManufacturerPartTable","isLoggedIn","PermissionDenied","Stack","PageDetail","PanelGroup"],"mappings":"2tCA2BA,SAASA,EAAsB,CAC7BC,KAAAA,CAGF,EAAG,CACD,OAAQA,EAAI,CACV,IAAK,WAED,OAAAC,EAAA,IAACC,GACC,MAAOC,EAAUC,cACjB,KAAMC,EAAUC,eAChB,OAAQ,CAAEC,YAAa,EAAA,EACvB,EAEN,IAAK,QACL,QACE,aAAQC,EAAqB,EAAA,CAAA,CAEnC,CAEA,SAAwBC,IAAkB,CACxC,MAAMC,EAAOC,EAAa,EAEpB,CAACC,EAAmBC,CAAoB,EAAIC,EAAwB,CACxEC,IAAK,oBACLC,aAAc,OAAA,CACf,EAEKC,EAASC,EAAAA,QAAQ,IACd,CACL,CACEC,KAAM,iBACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAkB,EACzBC,WAAOC,EAAmB,EAAA,EAC1BC,OAAQ,CAAChB,EAAKiB,YAAYtB,EAAUC,cAAc,EAClDsB,QAAS3B,EAAAA,IAACF,EAAsB,CAAA,KAAMa,CAAqB,CAAA,EAC3DiB,eACGC,EACC,CAAA,MAAOlB,EACP,SAAUC,EACV,KAAM,CACJ,CAAEkB,MAAO,QAASX,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAa,EAAEC,WAAOQ,EAAS,CAAA,CAAA,CAAA,EACxD,CACED,MAAO,WACPX,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAgB,EACvBC,WAAOS,EAAY,CAAA,CAAA,CAAA,CACpB,CACD,CAAA,CAAA,EAIR,CACEd,KAAM,YACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAY,EACnBC,WAAOU,EAAoB,EAAA,EAC3BN,QACE3B,EAAA,IAACkC,EACC,CAAA,KAAK,sBACL,OAAQ,CAAEC,YAAa,EAAA,CAAO,CAAA,CAAA,EAIpC,CACEjB,KAAM,iBACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAiB,EACxBC,WAAOa,EAAoB,EAAA,EAC3BT,QAAS3B,EAAAA,IAACqC,EAAkB,CAAA,OAAQ,CAAA,CAAG,CAAA,CAAA,EAEzC,CACEnB,KAAM,eACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAgB,EACvBC,WAAOe,EAAuB,EAAA,EAC9BX,QACE3B,EAAA,IAACkC,EACC,CAAA,KAAK,0BACL,OAAQ,CAAEK,gBAAiB,EAAA,CAAO,CAAA,CAAA,EAIxC,CACErB,KAAM,qBACNC,MAAKC,EAAAC,EAAE,CAAAC,GAAA,QAAA,CAAqB,EAC5BC,WAAOiB,EAAwB,EAAA,EAC/Bb,QAAS3B,EAAAA,IAACyC,EAAsB,CAAA,OAAQ,CAAA,CAAG,CAAA,CAAA,CAC5C,EAEF,CAAChC,EAAME,CAAiB,CAAC,EAExB,MAAA,CAACF,EAAKiC,cAAgB,CAACjC,EAAKiB,YAAYtB,EAAUC,cAAc,QAC1DsC,EAAmB,EAAA,SAI1BC,EACC,CAAA,SAAA,CAAC5C,EAAAA,IAAA6C,EAAA,CAAW,MAAMzB,EAAAC,EAAC,CAAAC,GAAA,QAAA,CAAY,EAAE,EACjCtB,MAAC8C,GACC,QAAQ,mBACR,OAAA9B,EACA,MAAO,aACP,GAAI,IAAK,CAAA,CAAA,EAEb,CAEJ"}
