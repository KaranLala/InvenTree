import{r as s,j as t,cx as d,i as a,dz as v,bx as q,b9 as Q,aV as X,aE as O,S as Y}from"./vendor-c9tu_e1b.js";import{b as B,A as l,m as r,e as G,U as n,h as W}from"./index-C-YqHYR0.js";import{A as Z}from"./AdminButton-B4su-izZ.js";import{I as J,D as c,a as V}from"./InstanceDetail-BhafbIJP.js";import{D as m}from"./DetailsBadge-D_E2hPhf.js";import{D as L,N as H}from"./NotesPanel-B1Mm8XV0.js";import{y as P,O as ee,z as ae,E as te,D as ie}from"./InvenTreeTable-_nPJoCLK.js";import{P as re}from"./PageDetail-UrmB-yLk.js";import{P as oe}from"./PanelGroup-Dx-tKZpU.js";import{a as ne}from"./CompanyForms-DAK9mm-H.js";import{u as se,a as le,b as pe}from"./UseForm-21BEg7Md.js";import{u as de}from"./UseInstance-Z-QOK6WR.js";import{P as ce}from"./PurchaseOrderTable-Ba7yiiQb.js";import{S as me}from"./SupplierPriceBreakTable-7qCXQ0SH.js";import{S as ue}from"./StockItemTable-BNURu3dq.js";import{p as _e,a as be}from"./ThemeContext-CVPHi9Q7.js";import"./ActionButton-Cn3lAMG1.js";import"./index-D1sX3jYA.js";import"./YesNoButton-BdKeJbQO.js";import"./DesktopAppView-Bg1vO8uy.js";import"./formatters-1-K9MQML.js";import"./ModelType-CepomS9H.js";import"./GenericErrorPage-RCGZWWhe.js";import"./NotFound-Cglkc0xC.js";import"./PermissionDenied-D4im8ofc.js";import"./QRCode-4MaRh6JQ.js";import"./browser-oJrDmCBJ.js";import"./PageTitle-BiZTQEW1.js";import"./PluginSource-CpS38oS9.js";import"./RemoteComponent-BK_-mK5N.js";import"./PurchaseOrderForms-CcRoGXTZ.js";import"./RemoveRowButton-0iZczeVG.js";import"./UseGenerator-DwBNXut7.js";import"./ColumnRenderers-6-W27ey5.js";import"./OrderPartsWizard-DcOlnycT.js";import"./UseStockAdjustActions-PDcplZpx.js";function He(){var f,g;const{id:N}=_e(),o=B(),M=be(),{instance:e,instanceQuery:u,refreshInstance:b}=de({endpoint:l.supplier_part_list,pk:N,hasPrimaryKey:!0,params:{part_detail:!0,supplier_detail:!0,manufacturer_detail:!0}}),F=s.useMemo(()=>{var x,j,D,I,S,E,C,A;if(u.isFetching)return t.jsx(d,{});const i=e??{};i.manufacturer=(x=i.manufacturer_detail)==null?void 0:x.pk,i.MPN=(j=i.manufacturer_part_detail)==null?void 0:j.MPN,i.manufacturer_part=(D=i.manufacturer_part_detail)==null?void 0:D.pk;const p=[{type:"link",name:"part",label:a._({id:"GNd5ad"}),model:r.part,hidden:!e.part},{type:"string",name:"part_detail.IPN",label:a._({id:"3wXEsN"}),copy:!0,hidden:!((I=i.part_detail)!=null&&I.IPN),icon:"serial"},{type:"string",name:"part_detail.description",label:a._({id:"5ZWiLz"}),copy:!0,icon:"info",hidden:!((S=i.part_detail)!=null&&S.description)},{type:"link",external:!0,name:"link",label:a._({id:"0R4wMK"}),copy:!0,hidden:!e.link},{type:"string",name:"note",label:a._({id:"KiJn9B"}),copy:!0,hidden:!e.note}],z=[{type:"link",name:"supplier",label:a._({id:"PYTEl0"}),model:r.company,icon:"suppliers",hidden:!e.supplier},{type:"string",name:"SKU",label:a._({id:"y90mqQ"}),copy:!0,icon:"reference"},{type:"string",name:"description",label:a._({id:"Nu4oKW"}),copy:!0,hidden:!i.description},{type:"link",name:"manufacturer",label:a._({id:"+m9/3S"}),model:r.company,icon:"manufacturers",hidden:!i.manufacturer},{type:"link",name:"manufacturer_part",model_field:"MPN",label:a._({id:"ZCCuT2"}),model:r.manufacturerpart,copy:!0,icon:"reference",hidden:!i.manufacturer_part}],K=[{type:"string",name:"packaging",label:a._({id:"pD/Ew0"}),copy:!0,hidden:!i.packaging},{type:"string",name:"pack_quantity",label:a._({id:"J9LTXQ"}),copy:!0,hidden:!i.pack_quantity,icon:"packages"}],$=[{type:"number",name:"in_stock",label:a._({id:"zn38D/"}),copy:!0,icon:"stock"},{type:"number",name:"on_order",label:a._({id:"0lg3zX"}),copy:!0,icon:"purchase_orders"},{type:"string",name:"available",label:a._({id:"WrzEdW"}),hidden:!i.availability_updated,copy:!0,icon:"packages"},{type:"string",name:"availability_updated",label:a._({id:"Qeo1xd"}),copy:!0,hidden:!i.availability_updated,icon:"calendar"}];return t.jsxs(J,{children:[t.jsxs(v,{grow:!0,children:[t.jsx(L,{appRole:n.part,src:(E=e==null?void 0:e.part_detail)==null?void 0:E.image,apiPath:G(l.part_list,(C=e==null?void 0:e.part_detail)==null?void 0:C.pk),pk:(A=e==null?void 0:e.part_detail)==null?void 0:A.pk}),t.jsx(v.Col,{span:8,children:t.jsx(c,{title:a._({id:"sQRZ1+"}),fields:p,item:i})})]}),t.jsx(c,{title:a._({id:"PYTEl0"}),fields:z,item:i}),t.jsx(c,{title:a._({id:"pD/Ew0"}),fields:K,item:i}),t.jsx(c,{title:a._({id:"lXkUEV"}),fields:$,item:i})]})},[e,u.isFetching]),T=s.useMemo(()=>[{name:"details",label:a._({id:"F+J5VC"}),icon:t.jsx(q,{}),content:F},{name:"stock",label:a._({id:"b447qM"}),icon:t.jsx(Q,{}),content:e!=null&&e.pk?t.jsx(ue,{tableName:"supplier-stock",allowAdd:!1,params:{supplier_part:e.pk}}):t.jsx(d,{})},{name:"purchaseorders",label:a._({id:"85Yvr2"}),icon:t.jsx(X,{}),content:e!=null&&e.pk?t.jsx(ce,{supplierId:e.supplier,supplierPartId:e.pk}):t.jsx(d,{})},{name:"pricing",label:a._({id:"OQkyYP"}),icon:t.jsx(O,{}),content:e!=null&&e.pk?t.jsx(me,{supplierPart:e}):t.jsx(d,{})},H({model_type:r.supplierpart,model_id:e==null?void 0:e.pk})],[e]),w=s.useMemo(()=>[t.jsx(Z,{model:r.supplierpart,id:e.pk}),t.jsx(P,{model:r.supplierpart,pk:e.pk,hash:e.barcode_hash,perm:o.hasChangeRole(n.purchase_order)}),t.jsx(ee,{tooltip:a._({id:"XIY/fv"}),actions:[ae({hidden:!o.hasAddRole(n.purchase_order),onClick:()=>y.open()}),te({hidden:!o.hasChangeRole(n.purchase_order),onClick:()=>_.open()}),ie({hidden:!o.hasDeleteRole(n.purchase_order),onClick:()=>h.open()})]})],[o,e]),k=ne({}),_=se({url:l.supplier_part_list,pk:e==null?void 0:e.pk,title:a._({id:"qZstuw"}),fields:k,onFormSuccess:b}),h=le({url:l.supplier_part_list,pk:e==null?void 0:e.pk,title:a._({id:"9Qoago"}),onFormSuccess:()=>{M(W(r.part,e.part))}}),y=pe({url:l.supplier_part_list,title:a._({id:"EREF+D"}),fields:k,initialData:{...e},follow:!0,modelType:r.supplierpart}),R=s.useMemo(()=>{var i,p;return[{name:a._({id:"UOTpFa"}),url:"/purchasing/"},{name:((i=e==null?void 0:e.supplier_detail)==null?void 0:i.name)??a._({id:"PYTEl0"}),url:`/purchasing/supplier/${((p=e==null?void 0:e.supplier_detail)==null?void 0:p.pk)??""}`}]},[e]),U=s.useMemo(()=>[t.jsx(m,{label:a._({id:"NoNwIX"}),color:"red",visible:e.active==!1}),t.jsx(m,{label:`${a._({id:"zn38D/"})}: ${e.in_stock}`,color:"green",visible:(e==null?void 0:e.active)&&(e==null?void 0:e.in_stock)&&(e==null?void 0:e.in_stock)>0},"in_stock"),t.jsx(m,{label:a._({id:"COcNhC"}),color:"red",visible:e.active&&e.in_stock==0},"no_stock"),t.jsx(m,{label:`${a._({id:"0lg3zX"})}: ${e.on_order}`,color:"blue",visible:e.on_order>0},"on_order")],[e]);return t.jsxs(t.Fragment,{children:[h.modal,y.modal,_.modal,t.jsx(V,{query:u,requiredRole:n.purchase_order,children:t.jsxs(Y,{gap:"xs",children:[t.jsx(re,{title:a._({id:"nne72x"}),subtitle:`${e.SKU} - ${(f=e==null?void 0:e.part_detail)==null?void 0:f.name}`,breadcrumbs:R,lastCrumb:[{name:e.SKU,url:`/purchasing/supplier-part/${e.pk}/`}],badges:U,actions:w,imageUrl:(g=e==null?void 0:e.part_detail)==null?void 0:g.thumbnail,editAction:_.open,editEnabled:o.hasChangePermission(r.supplierpart)}),t.jsx(oe,{pageKey:"supplierpart",panels:T,instance:e,reloadInstance:b,model:r.supplierpart,id:e.pk})]})})]})}export{He as default};
//# sourceMappingURL=SupplierPartDetail-CkjhnXaW.js.map
