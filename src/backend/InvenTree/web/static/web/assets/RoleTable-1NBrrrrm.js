import{r as l,j as e,S as R,bQ as d,B as r,A as h,G as _,cL as f,bJ as g,i as c,H as T,fb as v,I as k,n as b}from"./vendor-c9tu_e1b.js";import{a as S,e as B,A as E}from"./index-C-YqHYR0.js";function y({roles:x,editable:a=!1}){const[o,j]=l.useState(x);l.useEffect(()=>{j(x)},[x]);const p=l.useMemo(()=>o.some(s=>s.edited),[o]),m=l.useMemo(()=>o.sort((s,n)=>s.label>n.label?1:-1),[o]),u=l.useCallback((s,n)=>{a&&j(t=>t.map(i=>i.pk===s.pk?{...i,[n]:!i[n],edited:!0}:i))},[a]),w=async s=>{if(a){b.show({id:"group-roles-update",title:c._({id:"JL3si7"}),message:c._({id:"OEgtiW"}),loading:!0,color:"blue",autoClose:!1});for(const n of s.filter(t=>t.edited))await S.patch(B(E.ruleset_list,n.pk),{can_view:n.can_view,can_add:n.can_add,can_change:n.can_change,can_delete:n.can_delete}).then(()=>{j(t=>t.map(i=>i.pk===n.pk?{...i,edited:!1}:i))}).catch(t=>{console.error(t)});b.update({id:"group-roles-update",title:c._({id:"+b7T3G"}),message:c._({id:"5IF67l"}),autoClose:2e3,color:"green",icon:e.jsx(k,{}),loading:!1})}};return e.jsx(e.Fragment,{children:e.jsxs(R,{gap:"xs",children:[e.jsxs(d,{striped:!0,withColumnBorders:!0,withRowBorders:!0,withTableBorder:!0,children:[e.jsx(d.Thead,{children:e.jsxs(d.Tr,{children:[e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"GDvlUT"})})}),e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"jpctdh"})})}),e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"o+XJ9D"})})}),e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"m16xKo"})})}),e.jsx(d.Th,{children:e.jsx(r,{fw:700,children:e.jsx(h,{id:"cnGeoo"})})})]})}),e.jsx(d.Tbody,{children:m.map(s=>e.jsxs(d.Tr,{children:[e.jsx(d.Td,{children:e.jsxs(_,{gap:"xs",children:[e.jsx(r,{children:s.label}),s.edited&&e.jsx(r,{children:"*"})]})}),e.jsx(d.Td,{children:e.jsx(f,{disabled:!a,checked:s.can_view,onChange:()=>u(s,"can_view")})}),e.jsx(d.Td,{children:e.jsx(f,{disabled:!a,checked:s.can_change,onChange:()=>u(s,"can_change")})}),e.jsx(d.Td,{children:e.jsx(f,{disabled:!a,checked:s.can_add,onChange:()=>u(s,"can_add")})}),e.jsx(d.Td,{children:e.jsx(f,{disabled:!a,checked:s.can_delete,onChange:()=>u(s,"can_delete")})})]},s.pk??s.name))})]}),a&&e.jsxs(_,{justify:"right",children:[e.jsx(g,{label:c._({id:"Jyesik"}),disabled:!p,children:e.jsx(T,{color:"red",onClick:()=>{j(x)},disabled:!p,leftSection:e.jsx(v,{}),children:c._({id:"OfhWJH"})})}),e.jsx(g,{label:c._({id:"56Yn4L"}),disabled:!p,children:e.jsx(T,{color:"green",onClick:()=>{w(o)},disabled:!p,leftSection:e.jsx(k,{}),children:c._({id:"tfDRzk"})})})]})]})})}export{y as R};
//# sourceMappingURL=RoleTable-1NBrrrrm.js.map
