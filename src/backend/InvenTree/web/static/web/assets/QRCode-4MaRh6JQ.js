import{r as o,j as e,F as k,db as R,cx as S,bO as y,i as r,S as j,bP as c,bU as A,A as h,G as f,B as v,eb as B,c0 as E,H as T}from"./vendor-c9tu_e1b.js";import{Q as q}from"./browser-oJrDmCBJ.js";import{f as _,a as g,e as b,A as m,i as H}from"./index-C-YqHYR0.js";import{C as w,q as C,v as I}from"./ThemeContext-CVPHi9Q7.js";const M=({data:s,ecl:a="Q",margin:t=1})=>{const[i,l]=o.useState();return o.useEffect(()=>{if(!s)return l(void 0);q.toString(s,{errorCorrectionLevel:a,type:"svg",margin:t}).then(n=>{l(`data:image/svg+xml;utf8,${encodeURIComponent(n)}`)})},[s,a]),e.jsx(k,{children:i?e.jsx(R,{src:i,alt:"QR Code"}):e.jsx(S,{height:500})})},L=({mdl_prop:s,showEclSelector:a=!0,ecl:t="Q",...i})=>{const l=_(),[n,d]=o.useState(t);o.useEffect(()=>{t&&d(t)},[t]);const{data:x}=y({queryKey:["qr-code",s.model,s.pk],queryFn:async()=>g.post(b(m.barcode_generate),{model:s.model,pk:s.pk}).then(u=>{var p;return((p=u.data)==null?void 0:p.barcode)??""}).catch(u=>"")}),Q=o.useMemo(()=>[{value:"L",label:r._({id:"vAoQxm"})},{value:"M",label:r._({id:"xuqOBP"})},{value:"Q",label:r._({id:"cxfKe+"})},{value:"H",label:r._({id:"rgHRyZ"})}],[]);return e.jsxs(j,{children:[e.jsx(c,{}),s.hash?e.jsx(A,{variant:"outline",color:"red",title:r._({id:"/FLHWb"}),children:e.jsx(h,{id:"AjTb8p"})}):null,e.jsx(M,{data:x,ecl:n,...i}),e.jsx(c,{}),x&&l.getSetting("BARCODE_SHOW_TEXT","false")&&e.jsxs(f,{justify:a?"space-between":"center",align:"flex-start",px:16,children:[e.jsxs(j,{gap:4,pt:2,children:[e.jsx(v,{size:"sm",fw:500,children:e.jsx(h,{id:"vDT9iq"})}),e.jsxs(f,{children:[e.jsx(B,{children:x}),e.jsx(w,{value:x})]})]}),a&&e.jsx(E,{allowDeselect:!1,label:r._({id:"md4cw+"}),value:n,onChange:u=>d(u),data:Q})]})]})},U=({mdl_prop:s})=>{const[a,t]=o.useState(""),i=o.useCallback(l=>{g.post(b(m.barcode_link),{[s.model]:s.pk,barcode:l}).then(n=>{t(""),C.closeAll(),location.reload()}).catch(n=>{const d=H({error:n,field:"error",defaultMessage:r._({id:"59QdRH"})});t(d)})},[]);return e.jsxs(j,{gap:"xs",children:[e.jsx(c,{}),e.jsx(I,{onScan:i,actionText:r._({id:"yzF66j"}),error:a})]})},z=({mdl_prop:s})=>{function a(){g.post(b(m.barcode_unlink),{[s.model]:s.pk}).then(t=>{C.closeAll(),location.reload()})}return e.jsx(k,{children:e.jsxs(j,{gap:"sm",children:[e.jsx(c,{}),e.jsx(v,{children:e.jsx(h,{id:"GZnnMw"})}),e.jsx(c,{}),e.jsx(f,{grow:!0,children:e.jsx(T,{color:"red",onClick:a,children:e.jsx(h,{id:"ut1J8k"})})})]})})};export{L as I,U as Q,z as a,M as b};
//# sourceMappingURL=QRCode-4MaRh6JQ.js.map
