{"version":3,"file":"UseStockAdjustActions-PDcplZpx.js","sources":["../../../../../../frontend/src/forms/StockForms.tsx","../../../../../../frontend/src/hooks/UseStockAdjustActions.tsx"],"sourcesContent":["import { t } from '@lingui/core/macro';\nimport {\n  Alert,\n  Flex,\n  Group,\n  List,\n  Skeleton,\n  Stack,\n  Table,\n  Text\n} from '@mantine/core';\nimport { useDisclosure } from '@mantine/hooks';\nimport { modals } from '@mantine/modals';\nimport {\n  IconCalendarExclamation,\n  IconCoins,\n  IconCurrencyDollar,\n  IconLink,\n  IconPackage,\n  IconUsersGroup\n} from '@tabler/icons-react';\nimport { useQuery, useSuspenseQuery } from '@tanstack/react-query';\nimport { type JSX, Suspense, useEffect, useMemo, useState } from 'react';\n\nimport { ActionButton } from '@lib/components/ActionButton';\nimport { ApiEndpoints } from '@lib/enums/ApiEndpoints';\nimport { ModelType } from '@lib/enums/ModelType';\nimport dayjs from 'dayjs';\nimport { useNavigate } from 'react-router-dom';\nimport { api } from '../App';\nimport RemoveRowButton from '../components/buttons/RemoveRowButton';\nimport { StandaloneField } from '../components/forms/StandaloneField';\n\nimport { apiUrl } from '@lib/functions/Api';\nimport { getDetailUrl } from '@lib/functions/Navigation';\nimport type {\n  ApiFormAdjustFilterType,\n  ApiFormFieldChoice,\n  ApiFormFieldSet,\n  ApiFormModalProps\n} from '@lib/types/Forms';\nimport {\n  TableFieldExtraRow,\n  type TableFieldRowProps\n} from '../components/forms/fields/TableField';\nimport { Thumbnail } from '../components/images/Thumbnail';\nimport { StylishText } from '../components/items/StylishText';\nimport { StatusRenderer } from '../components/render/StatusRenderer';\nimport { InvenTreeIcon } from '../functions/icons';\nimport {\n  useApiFormModal,\n  useCreateApiFormModal,\n  useDeleteApiFormModal\n} from '../hooks/UseForm';\nimport {\n  useBatchCodeGenerator,\n  useSerialNumberGenerator\n} from '../hooks/UseGenerator';\nimport { useGlobalSettingsState } from '../states/SettingsStates';\nimport { StatusFilterOptions } from '../tables/Filter';\n\n/**\n * Construct a set of fields for creating / editing a StockItem instance\n */\nexport function useStockFields({\n  partId,\n  stockItem,\n  modalId,\n  create = false\n}: {\n  partId?: number;\n  stockItem?: any;\n  modalId: string;\n  create: boolean;\n}): ApiFormFieldSet {\n  const globalSettings = useGlobalSettingsState();\n\n  // Keep track of the \"part\" instance\n  const [partInstance, setPartInstance] = useState<any>({});\n\n  const [supplierPart, setSupplierPart] = useState<number | null>(null);\n\n  const [expiryDate, setExpiryDate] = useState<string | null>(null);\n\n  const batchGenerator = useBatchCodeGenerator({\n    modalId: modalId,\n    initialQuery: {\n      part: partId\n    }\n  });\n\n  const serialGenerator = useSerialNumberGenerator({\n    modalId: modalId,\n    initialQuery: {\n      part: partId\n    }\n  });\n\n  return useMemo(() => {\n    const fields: ApiFormFieldSet = {\n      part: {\n        value: partId || partInstance?.pk,\n        disabled: !create,\n        filters: {\n          active: create ? true : undefined\n        },\n        onValueChange: (value, record) => {\n          // Update the tracked part instance\n          setPartInstance(record);\n\n          serialGenerator.update({\n            part: value\n          });\n\n          batchGenerator.update({\n            part: value\n          });\n\n          // Clear the 'supplier_part' field if the part is changed\n          setSupplierPart(null);\n\n          // Adjust the 'expiry date' for the stock item\n          const expiry_days = record?.default_expiry ?? 0;\n\n          if (expiry_days && expiry_days > 0) {\n            // Adjust the expiry date based on the part default expiry\n            setExpiryDate(\n              dayjs().add(expiry_days, 'days').format('YYYY-MM-DD')\n            );\n          }\n        }\n      },\n      supplier_part: {\n        hidden: partInstance?.purchaseable == false,\n        value: supplierPart,\n        onValueChange: (value) => {\n          setSupplierPart(value);\n        },\n        filters: {\n          part_detail: true,\n          supplier_detail: true,\n          part: partId\n        },\n        adjustFilters: (adjust: ApiFormAdjustFilterType) => {\n          if (adjust.data.part) {\n            adjust.filters['part'] = adjust.data.part;\n          }\n\n          return adjust.filters;\n        }\n      },\n      use_pack_size: {\n        hidden: !create,\n        description: t`Add given quantity as packs instead of individual items`\n      },\n      location: {\n        // Cannot adjust location for existing stock items\n        hidden: !create,\n        onValueChange: (value) => {\n          batchGenerator.update({ location: value });\n        },\n        filters: {\n          structural: false\n        }\n      },\n      quantity: {\n        hidden: !create,\n        description: t`Enter initial quantity for this stock item`,\n        onValueChange: (value) => {\n          batchGenerator.update({ quantity: value });\n        }\n      },\n      serial_numbers: {\n        field_type: 'string',\n        label: t`Serial Numbers`,\n        disabled: partInstance?.trackable == false,\n        description: t`Enter serial numbers for new stock (or leave blank)`,\n        required: false,\n        hidden: !create,\n        placeholder:\n          serialGenerator.result &&\n          `${t`Next serial number`}: ${serialGenerator.result}`\n      },\n      serial: {\n        placeholder:\n          serialGenerator.result &&\n          `${t`Next serial number`}: ${serialGenerator.result}`,\n        hidden:\n          create ||\n          partInstance.trackable == false ||\n          (stockItem?.quantity != undefined && stockItem?.quantity != 1)\n      },\n      batch: {\n        placeholder:\n          batchGenerator.result &&\n          `${t`Next batch code`}: ${batchGenerator.result}`\n      },\n      status_custom_key: {\n        label: t`Stock Status`\n      },\n      expiry_date: {\n        icon: <IconCalendarExclamation />,\n        hidden: !globalSettings.isSet('STOCK_ENABLE_EXPIRY'),\n        value: expiryDate,\n        onValueChange: (value) => {\n          setExpiryDate(value);\n        }\n      },\n      purchase_price: {\n        icon: <IconCurrencyDollar />\n      },\n      purchase_price_currency: {\n        icon: <IconCoins />\n      },\n      packaging: {\n        icon: <IconPackage />\n      },\n      link: {\n        icon: <IconLink />\n      },\n      owner: {\n        icon: <IconUsersGroup />\n      },\n      delete_on_deplete: {}\n    };\n\n    // Remove the expiry date field if it is not enabled\n    if (!globalSettings.isSet('STOCK_ENABLE_EXPIRY')) {\n      delete fields.expiry_date;\n    }\n\n    return fields;\n  }, [\n    stockItem,\n    expiryDate,\n    partInstance,\n    partId,\n    globalSettings,\n    supplierPart,\n    serialGenerator.result,\n    batchGenerator.result,\n    create\n  ]);\n}\n\n/**\n * Launch a form to create a new StockItem instance\n */\nexport function useCreateStockItem() {\n  const fields = useStockFields({\n    create: true,\n    modalId: 'create-stock-item'\n  });\n\n  return useCreateApiFormModal({\n    url: ApiEndpoints.stock_item_list,\n    fields: fields,\n    modalId: 'create-stock-item',\n    title: t`Add Stock Item`\n  });\n}\n\n/**\n * Form set for manually removing (uninstalling) a StockItem from an existing StockItem\n */\nexport function useStockItemUninstallFields(): ApiFormFieldSet {\n  return useMemo(() => {\n    return {\n      location: {\n        filters: {\n          structural: false\n        }\n      },\n      note: {}\n    };\n  }, []);\n}\n\n/**\n * Form set for manually installing a StockItem into an existing StockItem\n */\nexport function useStockItemInstallFields({\n  stockItem\n}: {\n  stockItem: any;\n}): ApiFormFieldSet {\n  const globalSettings = useGlobalSettingsState();\n\n  const [selectedPart, setSelectedPart] = useState<number | null>(null);\n\n  useEffect(() => {\n    setSelectedPart(null);\n  }, [stockItem]);\n\n  return useMemo(() => {\n    // Note: The 'part' field is not a part of the API endpoint, so we construct it manually\n    return {\n      part: {\n        field_type: 'related field',\n        required: true,\n        exclude: true,\n        label: t`Part`,\n        description: t`Select the part to install`,\n        model: ModelType.part,\n        api_url: apiUrl(ApiEndpoints.part_list),\n        onValueChange: (value) => {\n          setSelectedPart(value);\n        },\n        filters: {\n          trackable: true,\n          in_bom_for: globalSettings.isSet('STOCK_ENFORCE_BOM_INSTALLATION')\n            ? stockItem.part\n            : undefined\n        }\n      },\n      stock_item: {\n        disabled: !selectedPart,\n        filters: {\n          part_detail: true,\n          in_stock: true,\n          available: true,\n          tracked: true,\n          part: selectedPart ? selectedPart : undefined\n        }\n      },\n      quantity: {},\n      note: {}\n    };\n  }, [globalSettings, selectedPart, stockItem]);\n}\n\n/**\n * Form set for serializing an existing StockItem\n */\nexport function useStockItemSerializeFields({\n  partId,\n  trackable,\n  modalId\n}: {\n  partId: number;\n  trackable: boolean;\n  modalId: string;\n}): ApiFormFieldSet {\n  const serialGenerator = useSerialNumberGenerator({\n    modalId: modalId,\n    isEnabled: () => trackable,\n    initialQuery: {\n      part: partId\n    }\n  });\n\n  return useMemo(() => {\n    return {\n      quantity: {},\n      serial_numbers: {\n        placeholder:\n          serialGenerator.result &&\n          `${t`Next serial number`}: ${serialGenerator.result}`\n      },\n      destination: {}\n    };\n  }, [serialGenerator.result]);\n}\n\nfunction StockItemDefaultMove({\n  stockItem,\n  value\n}: Readonly<{\n  stockItem: any;\n  value: any;\n}>) {\n  const { data } = useSuspenseQuery({\n    queryKey: [\n      'location',\n      stockItem.part_detail?.default_location ??\n        stockItem.part_detail?.category_default_location\n    ],\n    queryFn: async () => {\n      const url = apiUrl(\n        ApiEndpoints.stock_location_list,\n        stockItem.part_detail?.default_location ??\n          stockItem.part_detail?.category_default_location\n      );\n\n      return api\n        .get(url)\n        .then((response) => {\n          switch (response.status) {\n            case 200:\n              return response.data;\n            default:\n              return null;\n          }\n        })\n        .catch(() => {\n          return null;\n        });\n    }\n  });\n\n  return (\n    <Flex gap='sm' justify='space-evenly' align='center'>\n      <Flex gap='sm' direction='column' align='center'>\n        <Text>\n          {value} x {stockItem.part_detail.name}\n        </Text>\n        <Thumbnail\n          src={stockItem.part_detail.thumbnail}\n          size={80}\n          align='center'\n        />\n      </Flex>\n      <Flex direction='column' gap='sm' align='center'>\n        <Text>{stockItem.location_detail?.pathstring ?? '-'}</Text>\n        <InvenTreeIcon icon='arrow_down' />\n        <Suspense fallback={<Skeleton width='150px' />}>\n          <Text>{data?.pathstring}</Text>\n        </Suspense>\n      </Flex>\n    </Flex>\n  );\n}\n\nfunction moveToDefault(\n  stockItem: any,\n  value: StockItemQuantity,\n  refresh: () => void\n) {\n  modals.openConfirmModal({\n    title: <StylishText>{t`Confirm Stock Transfer`}</StylishText>,\n    children: <StockItemDefaultMove stockItem={stockItem} value={value} />,\n    onConfirm: () => {\n      if (\n        stockItem.location === stockItem.part_detail?.default_location ||\n        stockItem.location === stockItem.part_detail?.category_default_location\n      ) {\n        return;\n      }\n      api\n        .post(apiUrl(ApiEndpoints.stock_transfer), {\n          items: [\n            {\n              pk: stockItem.pk,\n              quantity: value,\n              batch: stockItem.batch,\n              status: stockItem.status\n            }\n          ],\n          location:\n            stockItem.part_detail?.default_location ??\n            stockItem.part_detail?.category_default_location\n        })\n        .then((response) => {\n          refresh();\n          return response.data;\n        })\n        .catch(() => {\n          return null;\n        });\n    }\n  });\n}\n\ntype StockAdjustmentItemWithRecord = {\n  obj: any;\n} & StockAdjustmentItem;\n\ntype TableFieldRefreshFn = (idx: number) => void;\ntype TableFieldChangeFn = (idx: number, key: string, value: any) => void;\n\ntype StockRow = {\n  item: StockAdjustmentItemWithRecord;\n  idx: number;\n  changeFn: TableFieldChangeFn;\n  removeFn: TableFieldRefreshFn;\n};\n\nfunction StockOperationsRow({\n  props,\n  transfer = false,\n  changeStatus = false,\n  add = false,\n  setMax = false,\n  merge = false,\n  record\n}: {\n  props: TableFieldRowProps;\n  transfer?: boolean;\n  changeStatus?: boolean;\n  add?: boolean;\n  setMax?: boolean;\n  merge?: boolean;\n  record?: any;\n}) {\n  const statusOptions: ApiFormFieldChoice[] = useMemo(() => {\n    return (\n      StatusFilterOptions(ModelType.stockitem)()?.map((choice) => {\n        return {\n          value: choice.value,\n          display_name: choice.label\n        };\n      }) ?? []\n    );\n  }, []);\n\n  const [quantity, setQuantity] = useState<StockItemQuantity>(\n    add ? 0 : (props.item?.quantity ?? 0)\n  );\n\n  const [status, setStatus] = useState<number | undefined>(undefined);\n\n  const removeAndRefresh = () => {\n    props.removeFn(props.idx);\n  };\n\n  const callChangeFn = (idx: number, key: string, value: any) => {\n    setTimeout(() => props.changeFn(idx, key, value), 0);\n  };\n\n  const [packagingOpen, packagingHandlers] = useDisclosure(false, {\n    onOpen: () => {\n      if (transfer) {\n        callChangeFn(props.idx, 'packaging', record?.packaging || undefined);\n      }\n    },\n    onClose: () => {\n      if (transfer) {\n        callChangeFn(props.idx, 'packaging', undefined);\n      }\n    }\n  });\n\n  const [statusOpen, statusHandlers] = useDisclosure(false, {\n    onOpen: () => {\n      setStatus(record?.status_custom_key || record?.status || undefined);\n      props.changeFn(props.idx, 'status', record?.status || undefined);\n    },\n    onClose: () => {\n      setStatus(undefined);\n      callChangeFn(props.idx, 'status', undefined);\n    }\n  });\n\n  const stockString: string = useMemo(() => {\n    if (!record) {\n      return '-';\n    }\n\n    if (!record.serial) {\n      return `${record.quantity}`;\n    } else {\n      return `#${record.serial}`;\n    }\n  }, [record]);\n\n  return !record ? (\n    <div>{t`Loading...`}</div>\n  ) : (\n    <>\n      <Table.Tr>\n        <Table.Td>\n          <Stack gap='xs'>\n            <Flex gap='sm' align='center'>\n              <Thumbnail\n                size={40}\n                src={record.part_detail?.thumbnail}\n                align='center'\n              />\n              <div>{record.part_detail?.name}</div>\n            </Flex>\n            {props.rowErrors?.pk?.message && (\n              <Text c='red' size='xs'>\n                {props.rowErrors.pk.message}\n              </Text>\n            )}\n          </Stack>\n        </Table.Td>\n        <Table.Td>\n          {record.location ? record.location_detail?.pathstring : '-'}\n        </Table.Td>\n        <Table.Td>{record.batch ? record.batch : '-'}</Table.Td>\n        <Table.Td>\n          <Group grow justify='space-between' wrap='nowrap'>\n            <Text>{stockString}</Text>\n            <StatusRenderer\n              status={record.status_custom_key}\n              type={ModelType.stockitem}\n            />\n          </Group>\n        </Table.Td>\n        {!merge && (\n          <Table.Td>\n            <StandaloneField\n              fieldName='quantity'\n              fieldDefinition={{\n                field_type: 'number',\n                value: quantity,\n                onValueChange: (value: any) => {\n                  setQuantity(value);\n                  props.changeFn(props.idx, 'quantity', value);\n                }\n              }}\n              error={props.rowErrors?.quantity?.message}\n            />\n          </Table.Td>\n        )}\n        <Table.Td>\n          <Flex gap='3px'>\n            {transfer && (\n              <ActionButton\n                onClick={() =>\n                  moveToDefault(record, props.item.quantity, removeAndRefresh)\n                }\n                icon={<InvenTreeIcon icon='default_location' />}\n                tooltip={t`Move to default location`}\n                tooltipAlignment='top'\n                disabled={\n                  !record.part_detail?.default_location &&\n                  !record.part_detail?.category_default_location\n                }\n              />\n            )}\n            {changeStatus && (\n              <ActionButton\n                size='sm'\n                icon={<InvenTreeIcon icon='status' />}\n                tooltip={t`Change Status`}\n                onClick={() => statusHandlers.toggle()}\n                variant={statusOpen ? 'filled' : 'transparent'}\n              />\n            )}\n            {transfer && (\n              <ActionButton\n                size='sm'\n                icon={<InvenTreeIcon icon='packaging' />}\n                tooltip={t`Adjust Packaging`}\n                onClick={() => packagingHandlers.toggle()}\n                variant={packagingOpen ? 'filled' : 'transparent'}\n              />\n            )}\n            <RemoveRowButton onClick={() => props.removeFn(props.idx)} />\n          </Flex>\n        </Table.Td>\n      </Table.Tr>\n      {changeStatus && (\n        <TableFieldExtraRow\n          visible={statusOpen}\n          onValueChange={(value: any) => {\n            setStatus(value);\n            props.changeFn(props.idx, 'status', value || undefined);\n          }}\n          fieldName='status'\n          fieldDefinition={{\n            field_type: 'choice',\n            label: t`Status`,\n            choices: statusOptions,\n            value: status\n          }}\n          defaultValue={status}\n        />\n      )}\n      {transfer && (\n        <TableFieldExtraRow\n          visible={transfer && packagingOpen}\n          onValueChange={(value: any) => {\n            props.changeFn(props.idx, 'packaging', value || undefined);\n          }}\n          fieldName='packaging'\n          fieldDefinition={{\n            field_type: 'string',\n            label: t`Packaging`\n          }}\n          defaultValue={record.packaging}\n        />\n      )}\n    </>\n  );\n}\n\ntype StockItemQuantity = number | '' | undefined;\n\ntype StockAdjustmentItem = {\n  pk: number;\n  quantity: StockItemQuantity;\n  batch?: string;\n  status?: number | '' | null;\n  packaging?: string;\n};\n\nfunction mapAdjustmentItems(items: any[]) {\n  const mappedItems: StockAdjustmentItemWithRecord[] = items.map((elem) => {\n    return {\n      pk: elem.pk,\n      quantity: elem.quantity,\n      batch: elem.batch || undefined,\n      status: elem.status || undefined,\n      packaging: elem.packaging || undefined,\n      obj: elem\n    };\n  });\n\n  return mappedItems;\n}\n\nfunction stockTransferFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: mapAdjustmentItems(items),\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item.pk];\n\n        return (\n          <StockOperationsRow\n            props={row}\n            transfer\n            changeStatus\n            setMax\n            key={record.pk}\n            record={record}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`Stock` },\n        { title: t`Move`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    location: {\n      filters: {\n        structural: false\n      }\n    },\n    notes: {}\n  };\n  return fields;\n}\n\nfunction stockReturnFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  // Only include items that are currently *not* in stock\n  const records = Object.fromEntries(\n    items.filter((item) => !item.in_stock).map((item) => [item.pk, item])\n  );\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: mapAdjustmentItems(items),\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item.pk];\n\n        return (\n          <StockOperationsRow\n            props={row}\n            key={record.pk}\n            record={record}\n            transfer\n            changeStatus\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`Quantity` },\n        { title: t`Return`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    location: {\n      filters: {\n        structural: false\n      }\n    },\n    merge: {},\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockRemoveFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: mapAdjustmentItems(items),\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item.pk];\n\n        return (\n          <StockOperationsRow\n            props={row}\n            setMax\n            changeStatus\n            add\n            key={record.pk}\n            record={record}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: t`Remove`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockAddFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: mapAdjustmentItems(items),\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item.pk];\n\n        return (\n          <StockOperationsRow\n            changeStatus\n            props={row}\n            add\n            key={record.pk}\n            record={record}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: t`Add`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockCountFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: mapAdjustmentItems(items),\n      modelRenderer: (row: TableFieldRowProps) => {\n        return (\n          <StockOperationsRow\n            props={row}\n            changeStatus\n            key={row.item.pk}\n            record={records[row.item.pk]}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: t`Count`, style: { width: '200px' } },\n        { title: t`Actions` }\n      ]\n    },\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockChangeStatusFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: items.map((elem) => {\n        return elem.pk;\n      }),\n      modelRenderer: (row: TableFieldRowProps) => {\n        return (\n          <StockOperationsRow\n            props={row}\n            key={row.item}\n            merge\n            record={records[row.item]}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: '', style: { width: '50px' } }\n      ]\n    },\n    status: {},\n    note: {}\n  };\n\n  return fields;\n}\n\nfunction stockMergeFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: items.map((elem) => {\n        return {\n          item: elem.pk,\n          obj: elem\n        };\n      }),\n      modelRenderer: (row: TableFieldRowProps) => {\n        return (\n          <StockOperationsRow\n            props={row}\n            key={row.item.item}\n            merge\n            changeStatus\n            record={records[row.item.item]}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: t`Actions` }\n      ]\n    },\n    location: {\n      default: items[0]?.part_detail?.default_location,\n      filters: {\n        structural: false\n      }\n    },\n    notes: {},\n    allow_mismatched_suppliers: {},\n    allow_mismatched_status: {}\n  };\n\n  return fields;\n}\n\nfunction stockAssignFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: items.map((elem) => {\n        return {\n          item: elem.pk,\n          obj: elem\n        };\n      }),\n      modelRenderer: (row: TableFieldRowProps) => {\n        return (\n          <StockOperationsRow\n            props={row}\n            key={row.item.item}\n            merge\n            record={records[row.item.item]}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: '', style: { width: '50px' } }\n      ]\n    },\n    customer: {\n      filters: {\n        is_customer: true\n      }\n    },\n    notes: {}\n  };\n\n  return fields;\n}\n\nfunction stockDeleteFields(items: any[]): ApiFormFieldSet {\n  if (!items) {\n    return {};\n  }\n\n  const records = Object.fromEntries(items.map((item) => [item.pk, item]));\n\n  const fields: ApiFormFieldSet = {\n    items: {\n      field_type: 'table',\n      value: items.map((elem) => {\n        return elem.pk;\n      }),\n      modelRenderer: (row: TableFieldRowProps) => {\n        const record = records[row.item];\n\n        return (\n          <StockOperationsRow\n            props={row}\n            key={record.pk}\n            merge\n            record={record}\n          />\n        );\n      },\n      headers: [\n        { title: t`Part` },\n        { title: t`Location` },\n        { title: t`Batch` },\n        { title: t`In Stock` },\n        { title: '', style: { width: '50px' } }\n      ]\n    }\n  };\n\n  return fields;\n}\n\ntype apiModalFunc = (props: ApiFormModalProps) => {\n  open: () => void;\n  close: () => void;\n  toggle: () => void;\n  modal: JSX.Element;\n};\n\nfunction useStockOperationModal({\n  items,\n  pk,\n  model,\n  refresh,\n  fieldGenerator,\n  endpoint,\n  filters,\n  title,\n  preFormContent,\n  successMessage,\n  modalFunc = useCreateApiFormModal\n}: {\n  items?: object;\n  pk?: number;\n  filters?: any;\n  model: ModelType | string;\n  refresh: () => void;\n  fieldGenerator: (items: any[]) => ApiFormFieldSet;\n  endpoint: ApiEndpoints;\n  title: string;\n  preFormContent?: JSX.Element;\n  successMessage?: string;\n  modalFunc?: apiModalFunc;\n}) {\n  const baseParams: any = {\n    part_detail: true,\n    location_detail: true,\n    cascade: false\n  };\n\n  const params = useMemo(() => {\n    const query_params: any = {\n      ...baseParams,\n      ...(filters ?? {})\n    };\n\n    query_params[model] =\n      pk === undefined && model === 'location' ? 'null' : pk;\n\n    return query_params;\n  }, [baseParams, filters, model, pk]);\n\n  const [opened, setOpened] = useState<boolean>(false);\n\n  const { data } = useQuery({\n    queryKey: ['stockitems', opened, model, pk, items, params],\n    queryFn: async () => {\n      if (items) {\n        // If a list of items is provided, use that directly\n        return Array.isArray(items) ? items : [items];\n      }\n\n      if (!pk || !opened) {\n        return [];\n      }\n\n      const url = apiUrl(ApiEndpoints.stock_item_list);\n\n      return api\n        .get(url, {\n          params: params\n        })\n        .then((response) => response.data ?? []);\n    }\n  });\n\n  const fields = useMemo(() => {\n    return fieldGenerator(data);\n  }, [data]);\n\n  return modalFunc({\n    url: endpoint,\n    fields: fields,\n    preFormContent: preFormContent,\n    title: title,\n    size: '80%',\n    successMessage: successMessage,\n    onFormSuccess: () => refresh(),\n    onClose: () => setOpened(false),\n    onOpen: () => setOpened(true)\n  });\n}\n\nexport type StockOperationProps = {\n  items?: any[];\n  pk?: number;\n  filters?: any;\n  model: ModelType.stockitem | 'location' | ModelType.part;\n  refresh: () => void;\n};\n\nexport function useAddStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockAddFields,\n    endpoint: ApiEndpoints.stock_add,\n    title: t`Add Stock`,\n    successMessage: t`Stock added`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Increase the quantity of the selected stock items by a given amount.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useRemoveStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockRemoveFields,\n    endpoint: ApiEndpoints.stock_remove,\n    title: t`Remove Stock`,\n    successMessage: t`Stock removed`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Decrease the quantity of the selected stock items by a given amount.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useTransferStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockTransferFields,\n    endpoint: ApiEndpoints.stock_transfer,\n    title: t`Transfer Stock`,\n    successMessage: t`Stock transferred`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Transfer selected items to the specified location.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useReturnStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockReturnFields,\n    endpoint: ApiEndpoints.stock_return,\n    title: t`Return Stock`,\n    successMessage: t`Stock returned`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Return selected items into stock, to the specified location.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useCountStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockCountFields,\n    endpoint: ApiEndpoints.stock_count,\n    title: t`Count Stock`,\n    successMessage: t`Stock counted`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Count the selected stock items, and adjust the quantity accordingly.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useChangeStockStatus(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockChangeStatusFields,\n    endpoint: ApiEndpoints.stock_change_status,\n    title: t`Change Stock Status`,\n    successMessage: t`Stock status changed`,\n    preFormContent: (\n      <Alert color='blue'>\n        {t`Change the status of the selected stock items.`}\n      </Alert>\n    )\n  });\n}\n\nexport function useMergeStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockMergeFields,\n    endpoint: ApiEndpoints.stock_merge,\n    title: t`Merge Stock`,\n    successMessage: t`Stock merged`,\n    preFormContent: (\n      <Alert title={t`Merge Stock Items`} color='yellow'>\n        <List>\n          <List.Item>{t`Merge operation cannot be reversed`}</List.Item>\n          <List.Item>{t`Tracking information may be lost when merging items`}</List.Item>\n          <List.Item>{t`Supplier information may be lost when merging items`}</List.Item>\n        </List>\n      </Alert>\n    )\n  });\n}\n\nexport function useAssignStockItem(props: StockOperationProps) {\n  // Filter items - only allow 'salable' items\n  const items = useMemo(() => {\n    return props.items?.filter((item) => item?.part_detail?.salable);\n  }, [props.items]);\n\n  return useStockOperationModal({\n    ...props,\n    items: items,\n    fieldGenerator: stockAssignFields,\n    endpoint: ApiEndpoints.stock_assign,\n    title: t`Assign Stock to Customer`,\n    successMessage: t`Stock assigned to customer`\n  });\n}\n\nexport function useDeleteStockItem(props: StockOperationProps) {\n  return useStockOperationModal({\n    ...props,\n    fieldGenerator: stockDeleteFields,\n    endpoint: ApiEndpoints.stock_item_list,\n    modalFunc: useDeleteApiFormModal,\n    title: t`Delete Stock Items`,\n    successMessage: t`Stock deleted`,\n    preFormContent: (\n      <Alert color='red'>\n        {t`This operation will permanently delete the selected stock items.`}\n      </Alert>\n    )\n  });\n}\n\nexport function stockLocationFields(): ApiFormFieldSet {\n  const fields: ApiFormFieldSet = {\n    parent: {\n      description: t`Parent stock location`,\n      required: false\n    },\n    name: {},\n    description: {},\n    structural: {},\n    external: {},\n    custom_icon: {\n      field_type: 'icon'\n    },\n    location_type: {}\n  };\n\n  return fields;\n}\n\n// Construct a set of fields for\nexport function useTestResultFields({\n  partId,\n  itemId,\n  templateId,\n  editing = false,\n  editTemplate = false\n}: {\n  partId: number;\n  itemId: number;\n  templateId: number | undefined;\n  editing?: boolean;\n  editTemplate?: boolean;\n}): ApiFormFieldSet {\n  // Valid field choices\n  const [choices, setChoices] = useState<any[]>([]);\n\n  // Field type for the \"value\" input\n  const [fieldType, setFieldType] = useState<'string' | 'choice'>('string');\n\n  const settings = useGlobalSettingsState();\n\n  const includeTestStation = useMemo(\n    () => settings.isSet('TEST_STATION_DATA'),\n    [settings]\n  );\n\n  return useMemo(() => {\n    const fields: ApiFormFieldSet = {\n      stock_item: {\n        value: itemId,\n        hidden: true\n      },\n      template: {\n        disabled: !editTemplate && !!templateId,\n        filters: {\n          include_inherited: true,\n          part: partId\n        },\n        onValueChange: (value: any, record: any) => {\n          // Adjust the type of the \"value\" field based on the selected template\n          if (record?.choices) {\n            const _choices: string[] = record.choices.split(',');\n\n            if (_choices.length > 0) {\n              setChoices(\n                _choices.map((choice) => {\n                  return {\n                    label: choice.trim(),\n                    value: choice.trim()\n                  };\n                })\n              );\n              setFieldType('choice');\n            } else {\n              setChoices([]);\n              setFieldType('string');\n            }\n          }\n        }\n      },\n      result: {},\n      value: {\n        field_type: fieldType,\n        choices: fieldType === 'choice' ? choices : undefined\n      },\n      attachment: {},\n      notes: {},\n      started_datetime: {\n        hidden: !includeTestStation\n      },\n      finished_datetime: {\n        hidden: !includeTestStation\n      },\n      test_station: {\n        hidden: !includeTestStation\n      }\n    };\n\n    if (editing) {\n      // Prevent changing uploaded attachments\n      delete fields.attachment;\n    }\n\n    return fields;\n  }, [\n    choices,\n    editing,\n    editTemplate,\n    fieldType,\n    partId,\n    itemId,\n    templateId,\n    includeTestStation\n  ]);\n}\n\n/**\n * Modal form for finding a particular stock item by serial number\n */\nexport function useFindSerialNumberForm({\n  partId\n}: {\n  partId: number;\n}) {\n  const navigate = useNavigate();\n\n  return useApiFormModal({\n    url: apiUrl(ApiEndpoints.stock_item_list),\n    fetchInitialData: false,\n    method: 'GET',\n    title: t`Find Serial Number`,\n    fields: {\n      serial: {},\n      part_tree: {\n        value: partId,\n        hidden: true,\n        field_type: 'integer'\n      }\n    },\n    checkClose: (data, form) => {\n      if (!data || data?.length == 0) {\n        form.setError('serial', { message: t`No matching items` });\n        return false;\n      }\n\n      if (data.length > 1) {\n        form.setError('serial', {\n          message: t`Multiple matching items`\n        });\n        return false;\n      }\n\n      if (data[0].pk) {\n        return true;\n      } else {\n        form.setError('serial', {\n          message: t`Invalid response from server`\n        });\n        return false;\n      }\n    },\n    onFormSuccess: (data) => {\n      if (data.length == 1 && data[0].pk) {\n        navigate(getDetailUrl(ModelType.stockitem, data[0].pk));\n      }\n    }\n  });\n}\n","import { UserRoles } from '@lib/index';\nimport type { UseModalReturn } from '@lib/types/Modals';\nimport { t } from '@lingui/core/macro';\nimport { type ReactNode, useMemo } from 'react';\nimport type { ActionDropdownItem } from '../components/items/ActionDropdown';\nimport { ActionDropdown } from '../components/items/ActionDropdown';\nimport {\n  type StockOperationProps,\n  useAddStockItem,\n  useAssignStockItem,\n  useChangeStockStatus,\n  useCountStockItem,\n  useDeleteStockItem,\n  useMergeStockItem,\n  useRemoveStockItem,\n  useReturnStockItem,\n  useTransferStockItem\n} from '../forms/StockForms';\nimport { InvenTreeIcon } from '../functions/icons';\nimport { useUserState } from '../states/UserState';\n\ninterface StockAdjustActionProps {\n  formProps: StockOperationProps;\n  enabled?: boolean;\n  add?: boolean;\n  assign?: boolean;\n  count?: boolean;\n  changeStatus?: boolean;\n  delete?: boolean;\n  merge?: boolean;\n  remove?: boolean;\n  transfer?: boolean;\n  return?: boolean;\n}\n\ninterface StockAdjustActionReturnProps {\n  modals: UseModalReturn[];\n  dropdown: ReactNode;\n  menuActions: ActionDropdownItem[];\n  hasActions: boolean;\n}\n\n/**\n * Hook to provide an interface for stock transfer actions.\n * - Provides a set of modals for creating, editing, and deleting stock transfers.\n * - Provides a set of menu actions for opening the modals.\n */\n\nexport function useStockAdjustActions(\n  props: StockAdjustActionProps\n): StockAdjustActionReturnProps {\n  const user = useUserState();\n\n  // The available modals for stock adjustment actions\n  const addStock = useAddStockItem(props.formProps);\n  const assignStock = useAssignStockItem(props.formProps);\n  const countStock = useCountStockItem(props.formProps);\n  const changeStatus = useChangeStockStatus(props.formProps);\n  const deleteStock = useDeleteStockItem(props.formProps);\n  const mergeStock = useMergeStockItem(props.formProps);\n  const removeStock = useRemoveStockItem(props.formProps);\n  const transferStock = useTransferStockItem(props.formProps);\n  const returnStock = useReturnStockItem(props.formProps);\n\n  // Construct a list of modals available for stock adjustment actions\n  const modals: UseModalReturn[] = useMemo(() => {\n    const modals: UseModalReturn[] = [];\n\n    if (!user.hasChangeRole(UserRoles.stock)) {\n      return [];\n    }\n\n    props.add != false && modals.push(addStock);\n    props.assign != false && modals.push(assignStock);\n    props.count != false && modals.push(countStock);\n    props.changeStatus != false && modals.push(changeStatus);\n    props.merge != false && modals.push(mergeStock);\n    props.remove != false && modals.push(removeStock);\n    props.transfer != false && modals.push(transferStock);\n    props.return === true && modals.push(returnStock);\n    props.delete != false &&\n      user.hasDeleteRole(UserRoles.stock) &&\n      modals.push(deleteStock);\n\n    return modals;\n  }, [props, user]);\n\n  // Construct a list of actions available in the stock adjustment dropdown menu\n  const menuActions: ActionDropdownItem[] = useMemo(() => {\n    const menuActions: ActionDropdownItem[] = [];\n\n    if (!user.hasChangeRole(UserRoles.stock)) {\n      return [];\n    }\n\n    props.count != false &&\n      menuActions.push({\n        name: t`Count Stock`,\n        icon: <InvenTreeIcon icon='stocktake' iconProps={{ color: 'blue' }} />,\n        tooltip: t`Count selected stock items`,\n        onClick: () => {\n          countStock.open();\n        }\n      });\n\n    props.add != false &&\n      menuActions.push({\n        name: t`Add Stock`,\n        icon: <InvenTreeIcon icon='add' iconProps={{ color: 'green' }} />,\n        tooltip: t`Add to selected stock items`,\n        onClick: () => {\n          addStock.open();\n        }\n      });\n\n    props.remove != false &&\n      menuActions.push({\n        name: t`Remove Stock`,\n        icon: <InvenTreeIcon icon='remove' iconProps={{ color: 'red' }} />,\n        tooltip: t`Remove from selected stock items`,\n        onClick: () => {\n          removeStock.open();\n        }\n      });\n\n    props.transfer != false &&\n      menuActions.push({\n        name: t`Transfer Stock`,\n        icon: <InvenTreeIcon icon='transfer' iconProps={{ color: 'blue' }} />,\n        tooltip: t`Transfer selected stock items`,\n        onClick: () => {\n          transferStock.open();\n        }\n      });\n\n    props.merge != false &&\n      menuActions.push({\n        name: t`Merge Stock`,\n        icon: <InvenTreeIcon icon='merge' />,\n        tooltip: t`Merge selected stock items`,\n        onClick: () => {\n          mergeStock.open();\n        }\n      });\n\n    props.changeStatus != false &&\n      menuActions.push({\n        name: t`Change Status`,\n        icon: <InvenTreeIcon icon='info' iconProps={{ color: 'blue' }} />,\n        tooltip: t`Change status of selected stock items`,\n        onClick: () => {\n          changeStatus.open();\n        }\n      });\n\n    props.assign != false &&\n      menuActions.push({\n        name: t`Assign Stock`,\n        icon: <InvenTreeIcon icon='customer' />,\n        tooltip: t`Assign selected stock items to a customer`,\n        onClick: () => {\n          assignStock.open();\n        }\n      });\n\n    props.return === true &&\n      menuActions.push({\n        name: t`Return Stock`,\n        icon: <InvenTreeIcon icon='return' iconProps={{ color: 'blue' }} />,\n        tooltip: t`Return selected items into stock`,\n        onClick: () => {\n          returnStock.open();\n        }\n      });\n\n    props.delete != false &&\n      menuActions.push({\n        name: t`Delete Stock`,\n        icon: <InvenTreeIcon icon='delete' iconProps={{ color: 'red' }} />,\n        tooltip: t`Delete selected stock items`,\n        disabled: !user.hasDeleteRole(UserRoles.stock),\n        onClick: () => {\n          deleteStock.open();\n        }\n      });\n\n    return menuActions;\n  }, [props, user]);\n\n  // Determine if there are any items selected\n  const hasItems: boolean = useMemo(() => {\n    return (props.formProps?.items?.length ?? 0) > 0;\n  }, [props.formProps.items]);\n\n  // Determine if there are any actions available\n  const hasActions: boolean = useMemo(() => {\n    return menuActions.length > 0;\n  }, [menuActions]);\n\n  // Construct a dropdown menu for stock actions\n  const dropdown: ReactNode = useMemo(() => {\n    return (\n      <ActionDropdown\n        key='stock-adjust-actions'\n        tooltip={t`Stock Actions`}\n        icon={<InvenTreeIcon icon='stock' />}\n        actions={menuActions}\n        disabled={\n          props.enabled != true && (props.enabled == false || !hasItems)\n        }\n        hidden={!hasActions}\n      />\n    );\n  }, [props.enabled, hasActions, hasItems, menuActions]);\n\n  return {\n    modals,\n    menuActions,\n    hasActions,\n    dropdown\n  };\n}\n"],"names":["useStockFields","partId","stockItem","modalId","create","globalSettings","useGlobalSettingsState","partInstance","setPartInstance","useState","supplierPart","setSupplierPart","expiryDate","setExpiryDate","batchGenerator","useBatchCodeGenerator","initialQuery","part","serialGenerator","useSerialNumberGenerator","useMemo","fields","value","pk","disabled","filters","active","undefined","onValueChange","record","update","expiry_days","default_expiry","dayjs","add","format","supplier_part","hidden","purchaseable","part_detail","supplier_detail","adjustFilters","adjust","data","use_pack_size","description","_i18n","_","id","location","structural","quantity","serial_numbers","field_type","label","trackable","required","placeholder","result","serial","batch","status_custom_key","expiry_date","icon","IconCalendarExclamation","isSet","purchase_price","IconCurrencyDollar","purchase_price_currency","IconCoins","packaging","IconPackage","link","IconLink","owner","IconUsersGroup","delete_on_deplete","useStockItemUninstallFields","note","useStockItemInstallFields","selectedPart","setSelectedPart","useEffect","exclude","model","ModelType","api_url","apiUrl","ApiEndpoints","part_list","in_bom_for","stock_item","in_stock","available","tracked","useStockItemSerializeFields","isEnabled","destination","StockItemDefaultMove","useSuspenseQuery","queryKey","default_location","category_default_location","queryFn","url","stock_location_list","api","get","then","response","status","catch","Flex","jsxs","Text","name","jsx","Thumbnail","thumbnail","location_detail","pathstring","InvenTreeIcon","Suspense","Skeleton","moveToDefault","refresh","modals","openConfirmModal","title","StylishText","children","onConfirm","post","stock_transfer","items","StockOperationsRow","props","transfer","changeStatus","setMax","merge","statusOptions","StatusFilterOptions","stockitem","map","choice","display_name","setQuantity","item","setStatus","removeAndRefresh","removeFn","idx","callChangeFn","key","setTimeout","changeFn","packagingOpen","packagingHandlers","useDisclosure","onOpen","onClose","statusOpen","statusHandlers","stockString","Fragment","Table","Stack","rowErrors","message","Group","StatusRenderer","StandaloneField","ActionButton","toggle","RemoveRowButton","TableFieldExtraRow","choices","mapAdjustmentItems","mappedItems","elem","obj","stockTransferFields","records","Object","fromEntries","modelRenderer","row","headers","style","width","notes","stockReturnFields","filter","stockRemoveFields","stockAddFields","stockCountFields","stockChangeStatusFields","stockMergeFields","default","allow_mismatched_suppliers","allow_mismatched_status","stockAssignFields","customer","is_customer","stockDeleteFields","useStockOperationModal","fieldGenerator","endpoint","preFormContent","successMessage","modalFunc","useCreateApiFormModal","baseParams","cascade","params","query_params","opened","setOpened","useQuery","Array","isArray","stock_item_list","size","onFormSuccess","useAddStockItem","stock_add","Alert","useRemoveStockItem","stock_remove","useTransferStockItem","useReturnStockItem","stock_return","useCountStockItem","stock_count","useChangeStockStatus","stock_change_status","useMergeStockItem","stock_merge","List","useAssignStockItem","salable","stock_assign","useDeleteStockItem","useDeleteApiFormModal","stockLocationFields","parent","external","custom_icon","location_type","useTestResultFields","itemId","templateId","editing","editTemplate","setChoices","fieldType","setFieldType","settings","includeTestStation","template","include_inherited","_choices","split","length","trim","attachment","started_datetime","finished_datetime","test_station","useFindSerialNumberForm","navigate","useNavigate","useApiFormModal","fetchInitialData","method","part_tree","checkClose","form","setError","getDetailUrl","useStockAdjustActions","user","useUserState","addStock","formProps","assignStock","countStock","deleteStock","mergeStock","removeStock","transferStock","returnStock","hasChangeRole","UserRoles","stock","push","assign","count","remove","return","delete","hasDeleteRole","menuActions","color","tooltip","onClick","open","hasItems","hasActions","dropdown","ActionDropdown","enabled"],"mappings":"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"}
