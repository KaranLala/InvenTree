import{r as n,i as t,j as s,cx as g,dz as A,bx as F,dA as I,dB as M,aV as S,b9 as E,b4 as v,bm as N,aC as L,b3 as O,S as G}from"./vendor-c9tu_e1b.js";import{b as D,A as l,U as o,e as P,m as p}from"./index-C-YqHYR0.js";import{A as B}from"./AdminButton-B4su-izZ.js";import{u as U,R as Y,a as V,I as W,P as $,O as q,E as z,D as H}from"./InvenTreeTable-_nPJoCLK.js";import{I as K,D as C,a as Q}from"./InstanceDetail-BhafbIJP.js";import{D as J}from"./DetailsBadge-D_E2hPhf.js";import{D as X,N as Z}from"./NotesPanel-B1Mm8XV0.js";import{P as ee}from"./PageDetail-UrmB-yLk.js";import{A as se}from"./AttachmentPanel-cEo4FCl5.js";import{P as te}from"./PanelGroup-Dx-tKZpU.js";import{c as ae}from"./CompanyForms-DAK9mm-H.js";import{b as ie,u as y,a as R,A as re}from"./UseForm-21BEg7Md.js";import{u as oe}from"./UseInstance-Z-QOK6WR.js";import{Y as ne}from"./YesNoButton-BdKeJbQO.js";import{L as le}from"./ColumnRenderers-6-W27ey5.js";import{C as de}from"./ContactTable-DP3iODyH.js";import{M as pe}from"./ManufacturerPartTable-D4WNHrha.js";import{P as ce}from"./PurchaseOrderTable-Ba7yiiQb.js";import{S as me}from"./SupplierPartTable-C-GEaDRA.js";import{S as ue,R as be}from"./SalesOrderTable-CpZYC7v7.js";import{S as w}from"./StockItemTable-BNURu3dq.js";import{p as _e,a as he}from"./ThemeContext-CVPHi9Q7.js";import"./ActionButton-Cn3lAMG1.js";import"./DesktopAppView-Bg1vO8uy.js";import"./index-D1sX3jYA.js";import"./QRCode-4MaRh6JQ.js";import"./browser-oJrDmCBJ.js";import"./formatters-1-K9MQML.js";import"./ModelType-CepomS9H.js";import"./GenericErrorPage-RCGZWWhe.js";import"./NotFound-Cglkc0xC.js";import"./PermissionDenied-D4im8ofc.js";import"./PageTitle-BiZTQEW1.js";import"./AttachmentLink-BmXuTpAy.js";import"./PluginSource-CpS38oS9.js";import"./RemoteComponent-BK_-mK5N.js";import"./PurchaseOrderForms-CcRoGXTZ.js";import"./RemoveRowButton-0iZczeVG.js";import"./UseGenerator-DwBNXut7.js";import"./ReturnOrderForms-DjkxHVm_.js";import"./SalesOrderForms-DpTkhoXL.js";import"./OrderPartsWizard-DcOlnycT.js";import"./UseStockAdjustActions-PDcplZpx.js";function fe({companyId:b,params:_}){const i=D(),r=U("address"),e=n.useMemo(()=>[{accessor:"title",sortable:!0,switchable:!1},{accessor:"primary",switchable:!1,sortable:!1,render:a=>ne({value:a.primary})},{accessor:"address",title:t._({id:"Du6bPw"}),sortable:!1,switchable:!1,render:a=>{let d="";return a!=null&&a.line1&&(d+=a.line1),a!=null&&a.line2&&(d+=` ${a.line2}`),d.trim()}},{accessor:"postal_code",sortable:!1,switchable:!0},{accessor:"postal_city",sortable:!1,switchable:!0},{accessor:"province",sortable:!1,switchable:!0},{accessor:"country",sortable:!1,switchable:!0},{accessor:"shipping_notes",sortable:!1,switchable:!0},{accessor:"internal_shipping_notes",sortable:!1,switchable:!0},le({})],[]),c=n.useMemo(()=>({company:{},title:{},primary:{},line1:{},line2:{},postal_code:{},postal_city:{},province:{},country:{},shipping_notes:{},internal_shipping_notes:{},link:{}}),[]),m=ie({url:l.address_list,title:t._({id:"W0pjLr"}),fields:c,initialData:{company:b},successMessage:t._({id:"N0ZOat"}),table:r}),[f,x]=n.useState(-1),u=y({url:l.address_list,pk:f,title:t._({id:"xLQ0lF"}),fields:c,table:r}),h=R({url:l.address_list,pk:f,title:t._({id:"xiRN5x"}),preFormWarning:t._({id:"F1bgq9"}),table:r}),k=n.useCallback(a=>{const d=i.hasChangeRole(o.purchase_order)||i.hasChangeRole(o.sales_order),T=i.hasDeleteRole(o.purchase_order)||i.hasDeleteRole(o.sales_order);return[Y({hidden:!d,onClick:()=>{x(a.pk),u.open()}}),V({hidden:!T,onClick:()=>{x(a.pk),h.open()}})]},[i]),j=n.useMemo(()=>{const a=i.hasChangeRole(o.purchase_order)||i.hasChangeRole(o.sales_order);return[s.jsx(re,{tooltip:t._({id:"W0pjLr"}),onClick:()=>m.open(),hidden:!a},"add-address")]},[i]);return s.jsxs(s.Fragment,{children:[m.modal,u.modal,h.modal,s.jsx(W,{url:P(l.address_list),tableState:r,columns:e,props:{enableDownload:!0,rowActions:k,tableActions:j,params:{..._,company:b}}})]})}function ns(b){const{id:_}=_e(),i=he(),r=D(),{instance:e,refreshInstance:c,instanceQuery:m}=oe({endpoint:l.company_list,pk:_,params:{},refetchOnMount:!0}),f=n.useMemo(()=>{if(m.isFetching)return s.jsx(g,{});const a=[{type:"text",name:"description",label:t._({id:"Nu4oKW"}),copy:!0},{type:"link",name:"website",label:t._({id:"On0aF2"}),external:!0,copy:!0,hidden:!e.website},{type:"text",name:"phone",label:t._({id:"HF6C2L"}),copy:!0,hidden:!e.phone},{type:"text",name:"email",label:t._({id:"hzKQCy"}),copy:!0,hidden:!e.email},{type:"text",name:"tax_id",label:t._({id:"m+elvG"}),copy:!0,hidden:!e.tax_id}],d=[{type:"string",name:"currency",label:t._({id:"xjO9oI"})},{type:"boolean",name:"is_supplier",label:t._({id:"PYTEl0"}),icon:"suppliers"},{type:"boolean",name:"is_manufacturer",label:t._({id:"+m9/3S"}),icon:"manufacturers"},{type:"boolean",name:"is_customer",label:t._({id:"876pfE"}),icon:"customers"}];return s.jsxs(K,{children:[s.jsxs(A,{grow:!0,children:[s.jsx(X,{appRole:o.purchase_order,apiPath:P(l.company_list,e.pk),src:e.image,pk:e.pk,refresh:c,imageActions:{uploadFile:!0,downloadImage:!0,deleteFile:!0}}),s.jsx(A.Col,{span:{base:12,sm:8},children:s.jsx(C,{item:e,fields:a})})]}),s.jsx(C,{item:e,fields:d})]})},[e,m]),x=n.useMemo(()=>[{name:"details",label:t._({id:"eDkDvt"}),icon:s.jsx(F,{}),content:f},{name:"supplied-parts",label:t._({id:"i4b9ex"}),icon:s.jsx(I,{}),hidden:!(e!=null&&e.is_supplier),content:(e==null?void 0:e.pk)&&s.jsx(me,{params:{supplier:e.pk}})},{name:"manufactured-parts",label:t._({id:"glJbgw"}),icon:s.jsx(M,{}),hidden:!(e!=null&&e.is_manufacturer),content:(e==null?void 0:e.pk)&&s.jsx(pe,{params:{manufacturer:e.pk}})},{name:"purchase-orders",label:t._({id:"85Yvr2"}),icon:s.jsx(S,{}),hidden:!(e!=null&&e.is_supplier),content:(e==null?void 0:e.pk)&&s.jsx(ce,{supplierId:e.pk})},{name:"stock-items",label:t._({id:"Jbck4N"}),icon:s.jsx(E,{}),hidden:!(e!=null&&e.is_manufacturer)&&!(e!=null&&e.is_supplier),content:(e==null?void 0:e.pk)&&s.jsx(w,{allowAdd:!1,tableName:"company-stock",params:{company:e.pk}})},{name:"sales-orders",label:t._({id:"B1TL+X"}),icon:s.jsx(v,{}),hidden:!(e!=null&&e.is_customer),content:(e==null?void 0:e.pk)&&s.jsx(ue,{customerId:e.pk})},{name:"return-orders",label:t._({id:"LlTg8M"}),icon:s.jsx(N,{}),hidden:!(e!=null&&e.is_customer),content:e.pk?s.jsx(be,{customerId:e.pk}):s.jsx(g,{})},{name:"assigned-stock",label:t._({id:"TVGEcl"}),icon:s.jsx(I,{}),hidden:!(e!=null&&e.is_customer),content:e!=null&&e.pk?s.jsx(w,{allowAdd:!1,tableName:"assigned-stock",showLocation:!1,allowReturn:!0,params:{customer:e.pk}}):s.jsx(g,{})},{name:"contacts",label:t._({id:"gVfVfe"}),icon:s.jsx(L,{}),content:(e==null?void 0:e.pk)&&s.jsx(de,{companyId:e.pk})},{name:"addresses",label:t._({id:"bYmAV1"}),icon:s.jsx(O,{}),content:(e==null?void 0:e.pk)&&s.jsx(fe,{companyId:e.pk})},se({model_type:p.company,model_id:e.pk}),Z({model_type:p.company,model_id:e.pk})],[_,e,r]),u=y({url:l.company_list,pk:e==null?void 0:e.pk,title:t._({id:"HoG6cl"}),fields:ae(),onFormSuccess:c}),h=R({url:l.company_list,pk:e==null?void 0:e.pk,title:t._({id:"riHm27"}),onFormSuccess:()=>{i("/")}}),k=n.useMemo(()=>[s.jsx(B,{model:p.company,id:e.pk}),s.jsx($,{modelType:p.company,items:[e.pk],enableReports:!0}),s.jsx(q,{tooltip:t._({id:"z+ZEYC"}),actions:[z({hidden:!r.hasChangeRole(o.purchase_order),onClick:()=>u.open()}),H({hidden:!r.hasDeleteRole(o.purchase_order),onClick:()=>h.open()})]})],[_,e,r]),j=n.useMemo(()=>[s.jsx(J,{label:t._({id:"NoNwIX"}),color:"red",visible:e.active==!1})],[e]);return s.jsxs(s.Fragment,{children:[u.modal,h.modal,s.jsx(Q,{query:m,requiredPermission:p.company,children:s.jsxs(G,{gap:"xs",children:[s.jsx(ee,{title:`${t._({id:"7i8j3G"})}: ${e.name}`,subtitle:e.description,actions:k,imageUrl:e.image,breadcrumbs:b.breadcrumbs,lastCrumb:[{name:e.name,url:`${b.last_crumb_url}/${e.pk}/`}],badges:j,editAction:u.open,editEnabled:r.hasChangePermission(p.company)}),s.jsx(te,{pageKey:"company",panels:x,instance:e,reloadInstance:c,model:p.company,id:e.pk})]})})]})}export{ns as default};
//# sourceMappingURL=CompanyDetail-C2WDfD8o.js.map
