import{r as o,i as a,j as t,cx as g,dz as R,bx as W,bw as v,dB as B,S as G}from"./vendor-c9tu_e1b.js";import{b as N,A as s,U as l,e as w,m as r,h as S}from"./index-C-YqHYR0.js";import{A as O}from"./AdminButton-B4su-izZ.js";import{I as q,D as F,a as Q}from"./InstanceDetail-BhafbIJP.js";import{D as Y,N as $}from"./NotesPanel-B1Mm8XV0.js";import{u as z,R as H,a as X,I as Z,O as L,z as V,E as J,D as ee}from"./InvenTreeTable-_nPJoCLK.js";import{P as te}from"./PageDetail-UrmB-yLk.js";import{A as ae}from"./AttachmentPanel-cEo4FCl5.js";import{P as re}from"./PanelGroup-Dx-tKZpU.js";import{b as ie,u as se}from"./CompanyForms-DAK9mm-H.js";import{b as P,u as T,a as E,A as oe}from"./UseForm-21BEg7Md.js";import{u as ne}from"./UseInstance-Z-QOK6WR.js";import{S as le}from"./SupplierPartTable-C-GEaDRA.js";import{p as pe,a as de}from"./ThemeContext-CVPHi9Q7.js";import"./ActionButton-Cn3lAMG1.js";import"./index-D1sX3jYA.js";import"./YesNoButton-BdKeJbQO.js";import"./DesktopAppView-Bg1vO8uy.js";import"./formatters-1-K9MQML.js";import"./ModelType-CepomS9H.js";import"./GenericErrorPage-RCGZWWhe.js";import"./NotFound-Cglkc0xC.js";import"./PermissionDenied-D4im8ofc.js";import"./QRCode-4MaRh6JQ.js";import"./browser-oJrDmCBJ.js";import"./PageTitle-BiZTQEW1.js";import"./AttachmentLink-BmXuTpAy.js";import"./PluginSource-CpS38oS9.js";import"./RemoteComponent-BK_-mK5N.js";import"./ColumnRenderers-6-W27ey5.js";function me({params:_}){const i=z("manufacturer-part-parameter"),n=N(),e=o.useMemo(()=>[{accessor:"name",title:a._({id:"6YtxFj"}),sortable:!0,switchable:!1},{accessor:"value",title:a._({id:"wMHvYH"}),sortable:!0,switchable:!1},{accessor:"units",title:a._({id:"QrhaVg"}),sortable:!1,switchable:!0}],[]),p=ie(),[c,h]=o.useState(void 0),f=P({url:s.manufacturer_part_parameter_list,title:a._({id:"WrK5aa"}),fields:p,table:i,initialData:{manufacturer_part:_.manufacturer_part}}),u=T({url:s.manufacturer_part_parameter_list,pk:c,title:a._({id:"FDjidN"}),fields:p,table:i}),d=E({url:s.manufacturer_part_parameter_list,pk:c,title:a._({id:"qSo+g1"}),table:i}),b=o.useCallback(x=>[H({hidden:!n.hasChangeRole(l.purchase_order),onClick:()=>{h(x.pk),u.open()}}),X({hidden:!n.hasDeleteRole(l.purchase_order),onClick:()=>{h(x.pk),d.open()}})],[n]),k=o.useMemo(()=>[t.jsx(oe,{tooltip:a._({id:"WrK5aa"}),onClick:()=>{f.open()},hidden:!n.hasAddRole(l.purchase_order)},"add-parameter")],[n]);return t.jsxs(t.Fragment,{children:[f.modal,u.modal,d.modal,t.jsx(Z,{url:w(s.manufacturer_part_parameter_list),tableState:i,columns:e,props:{params:{..._},rowActions:b,tableActions:k}})]})}function Oe(){var M,y;const{id:_}=pe(),i=N(),n=de(),{instance:e,instanceQuery:p,refreshInstance:c}=ne({endpoint:s.manufacturer_part_list,pk:_,hasPrimaryKey:!0,params:{part_detail:!0,manufacturer_detail:!0}}),h=o.useMemo(()=>{var A,D,I,C;if(p.isFetching)return t.jsx(g,{});const m=e??{},j=[{type:"link",name:"part",label:a._({id:"GNd5ad"}),model:r.part,hidden:!e.part},{type:"string",name:"part_detail.IPN",label:a._({id:"3wXEsN"}),copy:!0,icon:"serial",hidden:!((A=m.part_detail)!=null&&A.IPN)},{type:"string",name:"part_detail.description",label:a._({id:"Nu4oKW"}),copy:!0,icon:"info",hidden:!e.description}],U=[{type:"link",name:"manufacturer",label:a._({id:"+m9/3S"}),icon:"manufacturers",model:r.company,hidden:!e.manufacturer},{type:"string",name:"MPN",label:a._({id:"ZCCuT2"}),copy:!0,hidden:!e.MPN,icon:"reference"},{type:"string",name:"description",label:a._({id:"Nu4oKW"}),copy:!0,hidden:!e.description,icon:"info"},{type:"link",external:!0,name:"link",label:a._({id:"0R4wMK"}),copy:!0,hidden:!e.link}];return t.jsxs(q,{children:[t.jsxs(R,{grow:!0,children:[t.jsx(Y,{appRole:l.part,src:(D=e==null?void 0:e.part_detail)==null?void 0:D.image,apiPath:w(s.part_list,(I=e==null?void 0:e.part_detail)==null?void 0:I.pk),pk:(C=e==null?void 0:e.part_detail)==null?void 0:C.pk}),t.jsx(R.Col,{span:{base:12,sm:8},children:t.jsx(F,{title:a._({id:"sQRZ1+"}),fields:j,item:m})})]}),t.jsx(F,{title:a._({id:"BCSxrX"}),fields:U,item:m})]})},[e,p]),f=o.useMemo(()=>[{name:"details",label:a._({id:"uN9giG"}),icon:t.jsx(W,{}),content:h},{name:"parameters",label:a._({id:"F18WP3"}),icon:t.jsx(v,{}),content:e!=null&&e.pk?t.jsx(me,{params:{manufacturer_part:e.pk}}):t.jsx(g,{})},{name:"suppliers",label:a._({id:"9RecCt"}),icon:t.jsx(B,{}),content:e!=null&&e.pk?t.jsx(le,{params:{manufacturer_part:e.pk}}):t.jsx(g,{})},ae({model_type:r.manufacturerpart,model_id:e==null?void 0:e.pk}),$({model_type:r.manufacturerpart,model_id:e==null?void 0:e.pk})],[e]),u=se(),d=T({url:s.manufacturer_part_list,pk:e==null?void 0:e.pk,title:a._({id:"b30yxS"}),fields:u,onFormSuccess:c}),b=P({url:s.manufacturer_part_list,title:a._({id:"uOeMYf"}),fields:u,initialData:{...e},follow:!0,modelType:r.manufacturerpart}),k=E({url:s.manufacturer_part_list,pk:e==null?void 0:e.pk,title:a._({id:"fMDrRl"}),onFormSuccess:()=>{n(S(r.part,e.part))}}),x=o.useMemo(()=>[t.jsx(O,{model:r.manufacturerpart,id:e.pk},"admin"),t.jsx(L,{tooltip:a._({id:"D/ppgk"}),actions:[V({hidden:!i.hasAddRole(l.purchase_order),onClick:()=>b.open()}),J({hidden:!i.hasChangeRole(l.purchase_order),onClick:()=>d.open()}),ee({hidden:!i.hasDeleteRole(l.purchase_order),onClick:()=>k.open()})]},"options")],[i,e]),K=o.useMemo(()=>{var m,j;return[{name:a._({id:"UOTpFa"}),url:"/purchasing/"},{name:((m=e==null?void 0:e.manufacturer_detail)==null?void 0:m.name)??a._({id:"+m9/3S"}),url:`/purchasing/manufacturer/${(j=e==null?void 0:e.manufacturer_detail)==null?void 0:j.pk}/`}]},[e]);return t.jsxs(t.Fragment,{children:[k.modal,b.modal,d.modal,t.jsx(Q,{query:p,requiredPermission:r.manufacturerpart,children:t.jsxs(G,{gap:"xs",children:[t.jsx(te,{title:a._({id:"WssheI"}),subtitle:`${e.MPN} - ${(M=e.part_detail)==null?void 0:M.name}`,breadcrumbs:K,lastCrumb:[{name:e.MPN,url:S(r.manufacturerpart,e.pk)}],actions:x,imageUrl:(y=e==null?void 0:e.part_detail)==null?void 0:y.thumbnail,editAction:d.open,editEnabled:i.hasChangePermission(r.manufacturerpart)}),t.jsx(re,{pageKey:"manufacturerpart",panels:f,instance:e,reloadInstance:c,model:r.manufacturerpart,id:e.pk})]})})]})}export{Oe as default};
//# sourceMappingURL=ManufacturerPartDetail-DhYAGD-O.js.map
