import{bO as b,r as m,j as e,bQ as r,A as x,i as s,bk as A,bS as o,bW as i}from"./vendor-c9tu_e1b.js";import{S as _}from"./ThemeContext-CVPHi9Q7.js";import{a as I,e as j,A as E,b as f}from"./index-C-YqHYR0.js";import{f as N}from"./formatters-1-K9MQML.js";import{A as M}from"./ActionButton-Cn3lAMG1.js";import{u as g,a as S,I as R}from"./InvenTreeTable-_nPJoCLK.js";import{b as w,a as C}from"./UseForm-21BEg7Md.js";import{k as L}from"./ColumnRenderers-6-W27ey5.js";import"./DesktopAppView-Bg1vO8uy.js";import"./index-D1sX3jYA.js";import"./QRCode-4MaRh6JQ.js";import"./browser-oJrDmCBJ.js";import"./YesNoButton-BdKeJbQO.js";function V({keys:c}){const{data:a,isLoading:h}=b({queryKey:["config"],queryFn:async()=>I.get(j(E.config_list)).then(t=>t.data)}),d=m.useMemo(()=>a?c.map(t=>({key:t,value:a.find(l=>l.key===t)})):[],[h,a,c]);return e.jsx("span",{children:e.jsxs(r,{withColumnBorders:!0,withTableBorder:!0,striped:!0,children:[e.jsx(r.Thead,{children:e.jsxs(r.Tr,{children:[e.jsx(r.Th,{children:e.jsx(x,{id:"EFKJQT"})}),e.jsx(r.Th,{children:e.jsx(x,{id:"wdxz7K"})}),e.jsx(r.Th,{children:e.jsx(x,{id:"+b7T3G"})})]})}),e.jsx(r.Tbody,{children:d.map(t=>{var l,u;return e.jsxs(r.Tr,{children:[e.jsx(r.Td,{children:t.key}),e.jsx(r.Td,{children:(l=t.value)==null?void 0:l.source}),e.jsx(r.Td,{children:N((u=t.value)==null?void 0:u.accessed,{showTime:!0})})]},t.key)})})]})})}function k(){const c=w({url:E.email_test,title:s._({id:"89aQ3n"}),fields:{email:{}},successMessage:s._({id:"Xl929X"}),onFormSuccess:n=>{d.refreshTable()}}),a=f(),h=m.useMemo(()=>[e.jsx(M,{icon:e.jsx(A,{}),tooltip:s._({id:"89aQ3n"}),onClick:()=>c.open()},"test")],[]),d=g("emails","pk"),[t,l]=m.useState(""),u=C({url:E.email_list,pk:t,title:s._({id:"a3N6gf"}),successMessage:s._({id:"p7wv9/"}),table:d}),T=m.useMemo(()=>[{accessor:"subject",title:s._({id:"UJmAAK"}),sortable:!0},{accessor:"to",title:s._({id:"/jQctM"}),sortable:!0},{accessor:"sender",title:s._({id:"HW5fQk"}),sortable:!0},{accessor:"status",title:s._({id:"uAQUqI"}),sortable:!0,render:n=>{switch(n.status){case"A":return e.jsx(o,{color:"blue",children:s._({id:"x7ymhZ"})});case"S":return e.jsx(o,{color:"blue",children:s._({id:"h69WC6"})});case"F":return e.jsx(o,{color:"red",children:s._({id:"7Bj3x9"})});case"D":return e.jsx(o,{color:"green",children:s._({id:"BTOhSm"})});case"R":return e.jsx(o,{color:"green",children:s._({id:"cQlPDN"})});case"C":return e.jsx(o,{color:"green",children:s._({id:"KNBs+p"})})}return"-"},switchable:!0},{accessor:"direction",title:s._({id:"MRB7nI"}),sortable:!0,render:n=>n.direction==="incoming"?s._({id:"RAMaAx"}):s._({id:"O0Z2Xr"}),switchable:!0},L({accessor:"timestamp",title:s._({id:"8TMaZI"}),sortable:!0,switchable:!0,extra:{showTime:!0}})],[]),p=m.useCallback(n=>[S({onClick:()=>{l(n.pk),u.open()},hidden:!a.isStaff()})],[a]);return e.jsxs(e.Fragment,{children:[c.modal,u.modal,e.jsx(R,{tableState:d,url:j(E.email_list),columns:T,props:{rowActions:p,enableSearch:!0,enableColumnSwitching:!0,enableSelection:!0,enableBulkDelete:!0,tableActions:h}})]})}function q(){return e.jsxs(i,{multiple:!0,defaultValue:["emails"],children:[e.jsxs(i.Item,{value:"emails",children:[e.jsx(i.Control,{children:e.jsx(_,{size:"lg",children:s._({id:"VKLeoV"})})}),e.jsx(i.Panel,{children:e.jsx(k,{})})]},"emails"),e.jsxs(i.Item,{value:"settings",children:[e.jsx(i.Control,{children:e.jsx(_,{size:"lg",children:s._({id:"Tz0i8g"})})}),e.jsx(i.Panel,{children:e.jsx(V,{keys:["INVENTREE_EMAIL_BACKEND","INVENTREE_EMAIL_HOST","INVENTREE_EMAIL_PORT","INVENTREE_EMAIL_USERNAME","INVENTREE_EMAIL_PASSWORD","INVENTREE_EMAIL_PREFIX","INVENTREE_EMAIL_TLS","INVENTREE_EMAIL_SSL","INVENTREE_EMAIL_SENDER"]},"email_settings")})]},"settings")]})}export{q as default};
//# sourceMappingURL=EmailManagementPanel-_FZvNV-D.js.map
